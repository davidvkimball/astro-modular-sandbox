/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var we=Object.defineProperty;var Ue=Object.getOwnPropertyDescriptor;var ze=Object.getOwnPropertyNames;var We=Object.prototype.hasOwnProperty;var J=(h,a)=>{for(var e in a)we(h,e,{get:a[e],enumerable:!0})},qe=(h,a,e,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let t of ze(a))!We.call(h,t)&&t!==e&&we(h,t,{get:()=>a[t],enumerable:!(n=Ue(a,t))||n.enumerable});return h};var je=h=>qe(we({},"__esModule",{value:!0}),h);var it={};J(it,{default:()=>Ae});module.exports=je(it);var Ve=require("obsidian");var k=["Inter","Roboto","Open Sans","Lato","Poppins","Source Sans Pro","Nunito","Montserrat","Playfair Display","Merriweather","Lora","Crimson Text","PT Serif","Libre Baskerville","Fira Code","JetBrains Mono","Source Code Pro","IBM Plex Mono","Cascadia Code"],K={runWizardOnStartup:!0,currentTemplate:"standard",currentTheme:"oxygen",contentOrganization:"file-based",siteInfo:{site:"https://astro-modular.netlify.app",title:"Astro Modular",description:"A flexible blog theme designed for Obsidian users.",author:"David V. Kimball",language:"en"},navigation:{pages:[{title:"Posts",url:"/posts"},{title:"Projects",url:"/projects"},{title:"Docs",url:"/docs"},{title:"About",url:"/about"},{title:"GitHub",url:"https://github.com/davidvkimball/astro-modular"}],social:[{title:"X",url:"https://x.com/davidvkimball",icon:"x-twitter"},{title:"GitHub",url:"https://github.com/davidvkimball",icon:"github"}]},features:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,comments:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,featureButton:"mode",showSocialIconsInFooter:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og",profilePicture:!1,quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}},typography:{headingFont:"Inter",proseFont:"Inter",monoFont:"JetBrains Mono",fontSource:"local",customFonts:{heading:"",prose:"",mono:"",urls:""}},optionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},deployment:{platform:"netlify"},pluginConfig:{obsidianSettings:{attachmentLocation:"subfolder",subfolderName:"attachments"},astroComposerSettings:{creationMode:"file",indexFileName:"index"},imageInserterSettings:{valueFormat:"[[attachments/{image-url}]]",insertFormat:"[[attachments/{image-url}]]"}},optionalContentTypes:{projects:!0,docs:!0}},M=[{id:"oxygen",name:"Oxygen",description:"Modern, clean design",previewColors:["#075985","#38bdf8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#020617"},{id:"minimal",name:"Minimal",description:"Understated with high contrast",previewColors:["#2d383c","#87bfcf"],backgroundColorLight:"#fafafa",backgroundColorDark:"#1a1a1a"},{id:"atom",name:"Atom",description:"Dark theme with vibrant accents",previewColors:["#075985","#578af2"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#181a1f"},{id:"ayu",name:"Ayu",description:"Clean theme with warm colors",previewColors:["#99521a","#ff9933"],backgroundColorLight:"#f8f8f0",backgroundColorDark:"#0f1419"},{id:"catppuccin",name:"Catppuccin",description:"Pastel color palette",previewColors:["#95624f","#df7763"],backgroundColorLight:"#fef7ed",backgroundColorDark:"#181825"},{id:"charcoal",name:"Charcoal",description:"Dark, professional look",previewColors:["#202020","#c0c0c0"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#000000"},{id:"dracula",name:"Dracula",description:"Dark theme with purple accents",previewColors:["#7c3aed","#a78bfa"],backgroundColorLight:"#f8f8f2",backgroundColorDark:"#191a21"},{id:"everforest",name:"Everforest",description:"Soft, warm colors",previewColors:["#5a7a5a","#83c092"],backgroundColorLight:"#f7f6f3",backgroundColorDark:"#2d353b"},{id:"flexoki",name:"Flexoki",description:"Based on Material Design 3",previewColors:["#16504a","#4dbdb5"],backgroundColorLight:"#fefefe",backgroundColorDark:"#100f0f"},{id:"gruvbox",name:"Gruvbox",description:"Retro groove color scheme",previewColors:["#7a5412","#f78b33"],backgroundColorLight:"#fbf1c7",backgroundColorDark:"#1d2021"},{id:"macos",name:"macOS",description:"Native macOS appearance",previewColors:["#002e66","#339fff"],backgroundColorLight:"#f5f5f7",backgroundColorDark:"#141414"},{id:"nord",name:"Nord",description:"Arctic-inspired color palette",previewColors:["#2e4c63","#5e94b8"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#2e3440"},{id:"obsidian",name:"Obsidian",description:"Matches Obsidian's default theme",previewColors:["#522994","#9c75ff"],backgroundColorLight:"#f8f8f8",backgroundColorDark:"#0a0a0a"},{id:"rose-pine",name:"Ros\xE9 Pine",description:"All natural pine, faux fir, and winter",previewColors:["#ab2142","#ef97a9"],backgroundColorLight:"#faf4ed",backgroundColorDark:"#191724"},{id:"sky",name:"Sky",description:"Light, airy design",previewColors:["#136194","#46aad0"],backgroundColorLight:"#f0f9ff",backgroundColorDark:"#232729"},{id:"solarized",name:"Solarized",description:"Precision colors for machines and people",previewColors:["#0e3754","#339fff"],backgroundColorLight:"#fdf6e3",backgroundColorDark:"#002b36"},{id:"things",name:"Things",description:"Clean, minimal design",previewColors:["#1e3a8a","#4d95f7"],backgroundColorLight:"#f8fafc",backgroundColorDark:"#17191c"}],A=[{id:"standard",name:"Standard",description:"Full-featured blog with all default options enabled",features:["Command palette","Table of contents","Reading time","Linked mentions","Footer","Social icons","Scroll to top","Dark mode toggle"],recommended:!0},{id:"compact",name:"Compact",description:"Balanced setup for smaller sites with optimized layout",features:["Command palette","Table of contents","Reading time","Compact linked mentions","Custom aspect ratio"],recommended:!1},{id:"minimal",name:"Minimal",description:"Clean, simple blog with minimal features and content",features:["Command palette","Search posts/pages","Minimal navigation"],recommended:!1},{id:"custom",name:"Custom",description:"Granular control over every setting - opens config.ts",features:["All features configurable"],recommended:!1}];var pe=require("obsidian");var Re=require("obsidian");var X=class{constructor(a){this.plugin=a;let e=a.settings;this.state={currentStep:1,totalSteps:10,selectedTemplate:e.currentTemplate,selectedTheme:e.currentTheme,selectedContentOrg:e.contentOrganization,selectedSiteInfo:e.siteInfo,selectedNavigation:e.navigation,selectedFeatures:(()=>{let n={standard:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1},compact:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1},minimal:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1},custom:{...e.features}};return n[e.currentTemplate]||n.standard})(),selectedTypography:e.typography,selectedOptionalFeatures:e.optionalFeatures||{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus",repo:"",repoId:"",category:"",categoryId:"",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"}},selectedOptionalContentTypes:(()=>{let n=e.currentTemplate==="standard"||e.currentTemplate==="custom";return{projects:n,docs:n}})(),selectedDeployment:e.deployment.platform,runWizardOnStartup:e.runWizardOnStartup}}getState(){return this.state}updateState(a){this.state={...this.state,...a}}setState(a){this.state={...this.state,...a}}nextStep(){this.state.currentStep<this.state.totalSteps&&this.state.currentStep++}previousStep(){this.state.currentStep>1&&this.state.currentStep--}canGoNext(){return this.state.currentStep<this.state.totalSteps}canGoPrevious(){return this.state.currentStep>1}getProgress(){return this.state.currentStep/this.state.totalSteps*100}buildFinalSettings(){var e,n;let a=this.plugin.settings;a.currentTemplate=this.state.selectedTemplate,a.currentTheme=this.state.selectedTheme,a.contentOrganization=this.state.selectedContentOrg,a.siteInfo=this.state.selectedSiteInfo,a.navigation=this.state.selectedNavigation,a.features=this.state.selectedFeatures,a.typography=this.state.selectedTypography,a.optionalFeatures=this.state.selectedOptionalFeatures,a.deployment.platform=this.state.selectedDeployment,a.runWizardOnStartup=this.state.runWizardOnStartup,(e=a.optionalFeatures)!=null&&e.profilePicture&&(a.features.profilePicture=a.optionalFeatures.profilePicture.enabled),(n=a.optionalFeatures)!=null&&n.comments&&(a.features.comments=a.optionalFeatures.comments.enabled),a.optionalContentTypes=this.state.selectedOptionalContentTypes}};var I=class{constructor(a,e,n,t){this.app=a,this.modal=e,this.stateManager=n,this.plugin=t}nextStep(){this.stateManager.nextStep(),this.modal.close()}previousStep(){this.stateManager.previousStep(),this.modal.close()}updateState(a){this.stateManager.updateState(a)}getState(){return this.stateManager.getState()}};var Z=class extends I{render(a){var n,t,s,i,o,l;let e=this.getState();a.innerHTML=`
			<div class="welcome-content">
				<h2>Welcome to Astro Modular!</h2>
				<p>This wizard will help you set up your Astro Modular theme with the perfect configuration for your needs.</p>
				
				<div class="checkbox-option">
					<input type="checkbox" id="run-wizard-startup" ${e.runWizardOnStartup?"checked":""}>
					<label for="run-wizard-startup">Run this wizard on startup</label>
				</div>
				
				<div class="site-info-form">
					<h3>Site Information</h3>
					<div class="form-group">
						<label for="site-url">URL</label>
						<input type="text" id="site-url" value="${e.selectedSiteInfo.site}" placeholder="https://astro-modular.netlify.app">
					</div>
					<div class="form-group">
						<label for="site-title">Title</label>
						<input type="text" id="site-title" value="${e.selectedSiteInfo.title}" placeholder="Astro Modular">
					</div>
					<div class="form-group">
						<label for="site-description">Description</label>
						<input type="text" id="site-description" value="${e.selectedSiteInfo.description}" placeholder="A flexible blog theme designed for Obsidian users.">
					</div>
					<div class="form-group">
						<label for="site-author">Author Name</label>
						<input type="text" id="site-author" value="${e.selectedSiteInfo.author}" placeholder="David V. Kimball">
					</div>
					<div class="form-group">
						<label for="site-language">Language</label>
						<input type="text" id="site-language" value="${e.selectedSiteInfo.language}" placeholder="en">
					</div>
				</div>
			</div>
		`,(n=a.querySelector("#run-wizard-startup"))==null||n.addEventListener("change",r=>{let d=r.target;this.updateState({runWizardOnStartup:d.checked})}),(t=a.querySelector("#site-url"))==null||t.addEventListener("input",r=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,site:r.target.value}})}),(s=a.querySelector("#site-title"))==null||s.addEventListener("input",r=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,title:r.target.value}})}),(i=a.querySelector("#site-description"))==null||i.addEventListener("input",r=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,description:r.target.value}})}),(o=a.querySelector("#site-author"))==null||o.addEventListener("input",r=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,author:r.target.value}})}),(l=a.querySelector("#site-language"))==null||l.addEventListener("input",r=>{let d=this.getState();this.updateState({selectedSiteInfo:{...d.selectedSiteInfo,language:r.target.value}})})}};var Me=require("obsidian"),ee=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="template-selection">
				<h2>Choose your preset</h2>
				<p>Select a preset that best fits your content type and goals.</p>
				<div class="template-options">
					${A.map(n=>`
						<div class="template-option ${e.selectedTemplate===n.id?"selected":""}" 
							 data-template="${n.id}">
							<div class="template-header">
								<h3>${n.name}</h3>
								${n.recommended?'<span class="recommended">Default</span>':""}
							</div>
							<p class="template-description">${n.description}</p>
							<div class="template-features">
								${n.features.map(t=>`<span class="feature-tag">${t}</span>`).join("")}
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".template-option").forEach(n=>{n.addEventListener("click",()=>{let t=n.getAttribute("data-template");if(t){this.updateState({selectedTemplate:t});let s=t==="standard"||t==="custom";if(this.updateState({selectedOptionalContentTypes:{projects:s,docs:s}}),this.syncFeaturesWithTemplate(t),this.updatePluginSettingsWithTemplate(t),t==="custom")try{let i=require("fs"),o=require("path"),{shell:l}=require("electron"),r=this.app.vault.adapter.basePath||this.app.vault.adapter.path,d=typeof r=="string"?r:r.toString(),p=o.join(d,"..","config.ts");i.existsSync(p)||i.writeFileSync(p,`// Astro Modular Configuration
// Customize your settings here

export const siteConfig = {
  // Add your configuration here
};
`),l.openPath(p),new Me.Notice("Opening config.ts for custom configuration"),this.modal.close();return}catch(i){new Me.Notice(`Error opening config file: ${i instanceof Error?i.message:String(i)}`)}this.render(a)}})})}syncFeaturesWithTemplate(a){let e=this.plugin.configManager.getTemplatePreset(a);if(!e||!e.config||!e.config.features){console.error("Template preset not found:",a);return}this.updateState({selectedFeatures:e.config.features})}async updatePluginSettingsWithTemplate(a){let e=this.plugin.settings,n=this.plugin.configManager.getTemplatePreset(a);if(!n||!n.config){console.error("Template preset not found:",a);return}if(n.config.features){let s=e.features.comments,i=e.features.profilePicture;e.features={...e.features,...n.config.features},e.features.comments=s,e.features.profilePicture=i}let t=a==="standard"||a==="custom";e.optionalContentTypes={projects:t,docs:t},await this.plugin.saveData(e),this.refreshSettingsTab()}refreshSettingsTab(){let a=this.plugin.settingsTab;a&&typeof a.display=="function"&&a.display()}};var te=class extends I{render(a){let e=this.getState(),n=this.isObsidianDarkMode();a.innerHTML=`
			<div class="theme-selection">
				<h2>Choose your theme</h2>
				<p>Select a color scheme that matches your style and content.</p>
				<div class="theme-options">
					${M.map(t=>`
						<div class="theme-option ${e.selectedTheme===t.id?"selected":""}" 
							 data-theme="${t.id}" 
							 style="background: ${n?t.backgroundColorDark:t.backgroundColorLight};">
							<div class="theme-preview" style="background: linear-gradient(135deg, ${t.previewColors.join(", ")});">
								<div class="theme-preview-content">
									<div class="preview-text">Sample Text</div>
									<div class="preview-accent">Accent</div>
								</div>
							</div>
							<div class="theme-info">
								<h3>${t.name}</h3>
							</div>
						</div>
					`).join("")}
				</div>
			</div>
		`,a.querySelectorAll(".theme-option").forEach(t=>{t.addEventListener("click",()=>{let s=t.getAttribute("data-theme");s&&(this.updateState({selectedTheme:s}),this.render(a))})})}isObsidianDarkMode(){let a=document.body,e=a.classList.contains("theme-dark")||a.classList.contains("dark"),n=getComputedStyle(document.documentElement),s=n.getPropertyValue("color-scheme").trim()==="dark",i=n.getPropertyValue("--background-primary").trim(),o=Boolean(i&&(i.includes("#")&&parseInt(i.slice(1,3),16)<128||i.includes("rgb")&&i.includes("0, 0, 0")||i.includes("hsl")&&i.includes("0, 0%, 0%")));return e||s||o}};var G=require("obsidian"),ae=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="font-selection">
				<h2>Choose your fonts</h2>
				<p>Select fonts for headings, body text, and code.</p>
			</div>
		`;let n=a.querySelector(".font-selection").createDiv("font-options"),t=(s,i,o,l)=>{new G.Setting(n).setName(s).setDesc(i).addDropdown(r=>{k.forEach(d=>{r.addOption(d,d)}),r.setValue(o).onChange(l)})};t("Heading Font","Font for headings and titles",e.selectedTypography.headingFont,s=>this.updateTypographySetting("headingFont",s,e)),t("Body Font","Font for body text and paragraphs",e.selectedTypography.proseFont,s=>this.updateTypographySetting("proseFont",s,e)),t("Monospace Font","Font for code blocks and inline code",e.selectedTypography.monoFont,s=>this.updateTypographySetting("monoFont",s,e)),new G.Setting(n).setName("Font Source").setDesc("Choose how fonts are loaded").addDropdown(s=>{s.addOption("local","Local (Google Fonts)"),s.addOption("cdn","CDN (Custom)"),s.setValue(e.selectedTypography.fontSource).onChange(i=>{this.updateTypographySetting("fontSource",i,e),this.render(a)})}),e.selectedTypography.fontSource==="cdn"&&(new G.Setting(n).setName("Custom Font URLs").setDesc("Comma-separated URLs for custom fonts").addText(s=>{var i;return s.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.urls)||"").setPlaceholder("https://fonts.googleapis.com/css2?family=Custom+Font:wght@400;600&display=swap").onChange(o=>this.updateCustomFontSetting("urls",o,e))}),new G.Setting(n).setName("Custom Heading Font Name").setDesc("Font family name for headings").addText(s=>{var i;return s.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.heading)||"").setPlaceholder("Custom Heading Font").onChange(o=>this.updateCustomFontSetting("heading",o,e))}),new G.Setting(n).setName("Custom Body Font Name").setDesc("Font family name for body text").addText(s=>{var i;return s.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.prose)||"").setPlaceholder("Custom Body Font").onChange(o=>this.updateCustomFontSetting("prose",o,e))}),new G.Setting(n).setName("Custom Monospace Font Name").setDesc("Font family name for code").addText(s=>{var i;return s.setValue(((i=e.selectedTypography.customFonts)==null?void 0:i.mono)||"").setPlaceholder("Custom Monospace Font").onChange(o=>this.updateCustomFontSetting("mono",o,e))}))}updateTypographySetting(a,e,n){let t=this.getState();this.updateState({selectedTypography:{...t.selectedTypography,[a]:e}})}updateCustomFontSetting(a,e,n){let t=this.getState();this.updateState({selectedTypography:{...t.selectedTypography,customFonts:{...t.selectedTypography.customFonts,[a]:e}}})}};var ne=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="content-org-selection">
				<h2>Content organization</h2>
				<p>Choose how you want to organize your content and assets.</p>
				<div class="org-options">
					<div class="org-option ${e.selectedContentOrg==="file-based"?"selected":""}" 
						 data-org="file-based">
						<div class="org-header">
							<h3>File-based</h3>
							<span class="default-badge">Default</span>
						</div>
						<p>Single markdown files with images in attachments subfolder</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post.md
\u2514\u2500\u2500 attachments/
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
					<div class="org-option ${e.selectedContentOrg==="folder-based"?"selected":""}" 
						 data-org="folder-based">
						<div class="org-header">
							<h3>Folder-based</h3>
						</div>
						<p>Each post gets its own folder with co-located assets</p>
						<div class="org-example">
							<pre><code>posts/
\u251C\u2500\u2500 my-post/
\u2502   \u251C\u2500\u2500 index.md
\u2502   \u2514\u2500\u2500 image.jpg
\u2514\u2500\u2500 another-post/
    \u251C\u2500\u2500 index.md
    \u2514\u2500\u2500 image.jpg</code></pre>
						</div>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".org-option").forEach(n=>{n.addEventListener("click",()=>{let t=n.getAttribute("data-org");t&&(this.updateState({selectedContentOrg:t}),this.render(a))})})}};var se=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="navigation-selection">
				<h2>Navigation setup</h2>
				<p>Configure your site navigation and social links.</p>
				
				<div class="navigation-sections">
					<div class="nav-section">
						<h3>Navigation Pages</h3>
						<p>Add pages to your main navigation menu.</p>
						<div class="nav-items" id="pages-list">
							${e.selectedNavigation.pages.map((n,t)=>`
								<div class="nav-item" data-index="${t}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Page Title" value="${n.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="/page-url" value="${n.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${t}">Remove</button>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-page">+ Add Page</button>
					</div>
					
					<div class="nav-section">
						<h3>Social Links</h3>
						<p>Add social media links for your footer.</p>
						<div class="nav-items" id="social-list">
							${e.selectedNavigation.social.map((n,t)=>`
								<div class="nav-item" data-index="${t}" draggable="true">
									<div class="nav-item-content">
										<div class="nav-item-fields">
											<input type="text" class="nav-title" placeholder="Social Title" value="${n.title}" draggable="false">
											<input type="text" class="nav-url" placeholder="https://example.com" value="${n.url}" draggable="false">
										</div>
										<button class="nav-remove mod-warning" data-index="${t}">Remove</button>
									</div>
									<div class="nav-icon-row">
										<input type="text" class="nav-icon" placeholder="icon-name" value="${n.icon||""}" draggable="false">
										<div class="nav-icon-help">
											<small>Icon names from FontAwesome Brands</small>
										</div>
									</div>
								</div>
							`).join("")}
						</div>
						<button class="nav-add" id="add-social">+ Add Social Link</button>
					</div>
				</div>
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){var n,t,s,i;let e=this.getState();(n=a.querySelector("#pages-list"))==null||n.addEventListener("input",o=>{let l=o.target;if(l.classList.contains("nav-title")||l.classList.contains("nav-url")){let r=l.closest(".nav-item"),d=parseInt((r==null?void 0:r.getAttribute("data-index"))||"0"),p=l.classList.contains("nav-title")?"title":"url";e.selectedNavigation.pages[d][p]=l.value}}),(t=a.querySelector("#social-list"))==null||t.addEventListener("input",o=>{let l=o.target;if(l.classList.contains("nav-title")||l.classList.contains("nav-url")||l.classList.contains("nav-icon")){let r=l.closest(".nav-item"),d=parseInt((r==null?void 0:r.getAttribute("data-index"))||"0"),p=l.classList.contains("nav-title")?"title":l.classList.contains("nav-url")?"url":"icon";e.selectedNavigation.social[d][p]=l.value}}),(s=a.querySelector("#add-page"))==null||s.addEventListener("click",()=>{e.selectedNavigation.pages.push({title:"New Page",url:"/new-page"}),this.render(a)}),(i=a.querySelector("#add-social"))==null||i.addEventListener("click",()=>{e.selectedNavigation.social.push({title:"New Social",url:"https://example.com",icon:""}),this.render(a)}),a.addEventListener("click",o=>{let l=o.target;if(l.classList.contains("nav-remove")){let r=parseInt(l.getAttribute("data-index")||"0");l.closest("#pages-list")?e.selectedNavigation.pages.splice(r,1):e.selectedNavigation.social.splice(r,1),this.render(a)}}),this.setupDragAndDrop(a)}setupDragAndDrop(a){let e=this.getState(),n=null;a.addEventListener("dragstart",t=>{let s=t.target;s.classList.contains("nav-item")&&(n=s,s.style.opacity="0.5")}),a.addEventListener("dragend",t=>{let s=t.target;s.classList.contains("nav-item")&&(s.style.opacity="1",n=null)}),a.addEventListener("dragover",t=>{t.preventDefault();let s=t.target;if(s.classList.contains("nav-item")&&n&&s!==n){let i=s.getBoundingClientRect(),o=i.top+i.height/2;t.clientY<o?(s.style.borderTop="2px solid var(--interactive-accent)",s.style.borderBottom="none"):(s.style.borderBottom="2px solid var(--interactive-accent)",s.style.borderTop="none")}}),a.addEventListener("dragleave",t=>{let s=t.target;s.classList.contains("nav-item")&&(s.style.borderTop="none",s.style.borderBottom="none")}),a.addEventListener("drop",t=>{t.preventDefault();let s=t.target;if(s.classList.contains("nav-item")&&n){let i=parseInt(s.getAttribute("data-index")||"0"),o=parseInt(n.getAttribute("data-index")||"0"),l=s.closest("#pages-list"),r=s.closest("#social-list");if(s.style.borderTop="none",s.style.borderBottom="none",i!==o){if(l){let d=e.selectedNavigation.pages.splice(o,1)[0];e.selectedNavigation.pages.splice(i,0,d)}else if(r){let d=e.selectedNavigation.social.splice(o,1)[0];e.selectedNavigation.social.splice(i,0,d)}this.render(a)}}})}};var Y=require("obsidian"),oe=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="features-selection">
				<h2>Optional features</h2>
				<p>Enable or disable specific features for your site.</p>
			</div>
		`;let n=a.querySelector(".features-selection").createDiv("features-list");this.renderProfilePictureFeatureNative(n,e),this.renderCommentsFeatureNative(n,e)}renderProfilePictureFeatureNative(a,e){var o,l,r;let n=((l=(o=e.selectedOptionalFeatures)==null?void 0:o.profilePicture)==null?void 0:l.enabled)||!1,t=((r=e.selectedOptionalFeatures)==null?void 0:r.profilePicture)||{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"};new Y.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(d=>d.setValue(n).onChange(p=>{var u;this.updateState({selectedFeatures:{...e.selectedFeatures,profilePicture:p},selectedOptionalFeatures:{...e.selectedOptionalFeatures,profilePicture:{...(u=e.selectedOptionalFeatures)==null?void 0:u.profilePicture,enabled:p}}});let c=a.querySelector(".profile-picture-options");c&&(c.style.display=p?"block":"none")}));let s=a.createDiv("profile-picture-options");s.style.display=n?"block":"none",s.className="profile-picture-options";let i=(d,p,c,u)=>{let g=new Y.Setting(s).setName(d).setDesc(p);c==="text"?g.addText(m=>{var f;return m.setValue(t[d]||"").setPlaceholder(((f=u==null?void 0:u[0])==null?void 0:f.value)||"").onChange(N=>this.updateProfileSetting(d,N,e))}):g.addDropdown(m=>{u==null||u.forEach(f=>m.addOption(f.value,f.label)),m.setValue(t[d]).onChange(f=>this.updateProfileSetting(d,f,e))})};i("image","Image path","text",[{value:"/profile.jpg",label:"/profile.jpg"}]),i("alt","Alt text","text",[{value:"Profile picture",label:"Profile picture"}]),i("size","Size","dropdown",[{value:"sm",label:"Small"},{value:"md",label:"Medium"},{value:"lg",label:"Large"}]),i("url","URL (optional)","text",[{value:"https://example.com",label:"https://example.com"}]),i("placement","Placement","dropdown",[{value:"footer",label:"Footer"},{value:"header",label:"Header"}]),i("style","Style","dropdown",[{value:"circle",label:"Circle"},{value:"square",label:"Square"},{value:"none",label:"None"}])}updateProfileSetting(a,e,n){var t;this.updateState({selectedOptionalFeatures:{...n.selectedOptionalFeatures,profilePicture:{...(t=n.selectedOptionalFeatures)==null?void 0:t.profilePicture,[a]:e}}})}renderCommentsFeatureNative(a,e){var d,p,c;let n=((p=(d=e.selectedOptionalFeatures)==null?void 0:d.comments)==null?void 0:p.enabled)||!1,t=((c=e.selectedOptionalFeatures)==null?void 0:c.comments)||{enabled:!1,provider:"giscus",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"};new Y.Setting(a).setName("Comments").setDesc("Enable Giscus comment system for posts").addToggle(u=>u.setValue(n).onChange(g=>{var f;this.updateState({selectedFeatures:{...e.selectedFeatures,comments:g},selectedOptionalFeatures:{...e.selectedOptionalFeatures,comments:{...(f=e.selectedOptionalFeatures)==null?void 0:f.comments,enabled:g}}});let m=a.querySelector(".comments-options");m&&(m.style.display=g?"block":"none")}));let s=a.createDiv("comments-options");s.style.display=n?"block":"none",s.className="comments-options";let l=s.createDiv("giscus-setup-link").createEl("p",{text:"Need help setting up Giscus? "}).createEl("a",{text:"Visit giscus.app \u2192",href:"https://giscus.app/",attr:{target:"_blank",rel:"noopener noreferrer"}}),r=(u,g,m,f)=>{let N=new Y.Setting(s).setName(u).setDesc(g);m==="text"?N.addText(y=>{var C;return y.setValue(t[u]||"").setPlaceholder(((C=f==null?void 0:f[0])==null?void 0:C.value)||"").onChange(b=>this.updateCommentSetting(u,b,e))}):N.addDropdown(y=>{f==null||f.forEach(C=>y.addOption(C.value,C.label)),y.setValue(t[u]).onChange(C=>this.updateCommentSetting(u,C,e))})};r("repo","Repository","text",[{value:"username/repo",label:"username/repo"}]),r("repoId","Repository ID","text",[{value:"R_kgDOPllfKw",label:"R_kgDOPllfKw"}]),r("category","Category","text",[{value:"General",label:"General"}]),r("categoryId","Category ID","text",[{value:"DIC_kwDOPllfK84CvUpx",label:"DIC_kwDOPllfK84CvUpx"}]),r("mapping","Mapping","dropdown",[{value:"pathname",label:"Pathname"},{value:"url",label:"URL"},{value:"title",label:"Title"},{value:"og:title",label:"OG Title"}]),r("strict","Strict","dropdown",[{value:"0",label:"No"},{value:"1",label:"Yes"}]),r("reactions","Reactions","dropdown",[{value:"0",label:"Disabled"},{value:"1",label:"Enabled"}]),r("metadata","Metadata","dropdown",[{value:"0",label:"Disabled"},{value:"1",label:"Enabled"}]),r("inputPosition","Input Position","dropdown",[{value:"top",label:"Top"},{value:"bottom",label:"Bottom"}]),r("theme","Theme","dropdown",[{value:"light",label:"Light"},{value:"dark",label:"Dark"},{value:"preferred_color_scheme",label:"Auto"}]),r("lang","Language","dropdown",[{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"zh-CN",label:"Chinese (Simplified)"},{value:"zh-TW",label:"Chinese (Traditional)"}]),r("loading","Loading","dropdown",[{value:"lazy",label:"Lazy"},{value:"eager",label:"Eager"}])}updateCommentSetting(a,e,n){var t;this.updateState({selectedOptionalFeatures:{...n.selectedOptionalFeatures,comments:{...(t=n.selectedOptionalFeatures)==null?void 0:t.comments,[a]:e}}})}};var ie=class extends I{render(a){let e=this.getState();a.innerHTML=`
			<div class="deployment-selection">
				<h2>Deployment platform</h2>
				<p>Choose your preferred deployment platform.</p>
				<div class="deployment-options">
					<div class="deployment-option ${e.selectedDeployment==="netlify"?"selected":""}" 
						 data-deployment="netlify">
						<div class="deployment-header">
							<h3>Netlify</h3>
						</div>
						<p>Automatic deployments from Git with built-in form handling and serverless functions.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="vercel"?"selected":""}" 
						 data-deployment="vercel">
						<div class="deployment-header">
							<h3>Vercel</h3>
						</div>
						<p>Excellent performance with edge functions and automatic HTTPS.</p>
					</div>
					<div class="deployment-option ${e.selectedDeployment==="github-pages"?"selected":""}" 
						 data-deployment="github-pages">
						<div class="deployment-header">
							<h3>GitHub Pages</h3>
						</div>
						<p>Free hosting directly from your GitHub repository.</p>
					</div>
				</div>
			</div>
		`,a.querySelectorAll(".deployment-option").forEach(n=>{n.addEventListener("click",()=>{let t=n.getAttribute("data-deployment");t&&(this.updateState({selectedDeployment:t}),this.render(a))})})}};var Q=require("obsidian"),re=class extends I{async render(a){let e=this.getState(),n=await this.plugin.pluginManager.getPluginStatus();a.innerHTML=`
			<div class="plugin-config">
				<h2>Plugin configuration</h2>
				<p>Configure your Obsidian plugins for optimal integration.</p>
				
				<div class="plugin-status">
      ${n.map(t=>`
						<div class="plugin-item ${t.installed?"installed":"missing"}">
							<div class="plugin-icon">
								${t.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>'}
							</div>
							<div class="plugin-info">
								<h3>${t.name}</h3>
								<p>${t.installed?t.enabled?"Enabled":"Disabled":"Not installed"}</p>
							</div>
						</div>
					`).join("")}
				</div>
				
				<div class="config-options">
					<button class="mod-button mod-cta" id="configure-plugins">Configure Automatically</button>
					<button class="mod-button" id="show-instructions">Show Manual Instructions</button>
				</div>
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){var n,t;let e=this.getState();(n=a.querySelector("#configure-plugins"))==null||n.addEventListener("click",async()=>{try{let s=e.selectedContentOrg,i={obsidianSettings:{attachmentLocation:s==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:s==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(i)){let l=e.selectedContentOrg,r=l==="file-based"?"subfolder (attachments/)":"same folder",d=l==="file-based"?"file":"folder";new Q.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${r}
\u2022 Astro Composer: Creation mode \u2192 ${d}
\u2022 Image Inserter: Format updated for ${l}`,8e3)}else new Q.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)}catch(s){new Q.Notice(`Error configuring plugins: ${s instanceof Error?s.message:String(s)}`)}}),(t=a.querySelector("#show-instructions"))==null||t.addEventListener("click",async()=>{try{let s=e.selectedContentOrg,i={obsidianSettings:{attachmentLocation:s==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:s==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:s==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},o=await this.plugin.pluginManager.getManualConfigurationInstructions(i),{Modal:l}=require("obsidian"),r=new l(this.app);r.titleEl.setText("Manual Configuration Instructions");let d=r.contentEl.createDiv();d.style.padding="20px",d.style.lineHeight="1.6";let p=o.split(`
`),c=null;p.forEach(u=>{let g=u.trim();if(g==="")d.createEl("br");else if(g.startsWith("## ")){c&&(c=null);let m=d.createEl("h2");m.setText(g.substring(3)),m.style.marginTop="20px",m.style.marginBottom="10px",m.style.fontSize="1.2em",m.style.fontWeight="bold"}else if(g.match(/^\d+\.\s/)){if(c||(c=d.createEl("ol"),c&&(c.style.marginLeft="20px",c.style.marginBottom="15px")),c){let m=c.createEl("li");m.style.marginBottom="5px",this.parseBoldText(m,g.replace(/^\d+\.\s/,""))}}else if(g.startsWith("- ")||g.startsWith("* ")){if(c||(c=d.createEl("ul"),c&&(c.style.marginLeft="20px",c.style.marginBottom="15px")),c){let m=c.createEl("li");m.style.marginBottom="5px",this.parseBoldText(m,g.substring(2))}}else{c&&(c=null);let m=d.createEl("p");m.style.marginBottom="10px",this.parseBoldText(m,g)}}),r.open()}catch(s){new Q.Notice(`Error getting instructions: ${s instanceof Error?s.message:String(s)}`)}})}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(t=>{t.startsWith("**")&&t.endsWith("**")?a.createEl("strong").setText(t.substring(2,t.length-2)):t.trim()!==""&&a.appendText(t)})}};var le=require("obsidian");var ce=class extends I{render(a){let e=this.getState(),n=this.formatTemplateName(e.selectedTemplate),t=this.formatThemeName(e.selectedTheme),s=this.formatContentOrganization(e.selectedContentOrg),i=this.formatDeploymentName(e.selectedDeployment);a.innerHTML=`
			<div class="finalize-step">
				<h2>Finalize your configuration</h2>
				<p>Review your settings and complete the setup.</p>
				
				<div class="config-summary">
					<h3>Configuration Summary</h3>
					<div class="config-item">
						<strong>Template:</strong> ${n}
					</div>
					<div class="config-item">
						<strong>Theme:</strong> ${t}
					</div>
					<div class="config-item">
						<strong>Content Organization:</strong> ${s}
					</div>
					<div class="config-item">
						<strong>Deployment:</strong> ${i}
					</div>
					<div class="config-item">
						<strong>Site Title:</strong> ${e.selectedSiteInfo.title}
					</div>
					<div class="config-item">
						<strong>Site URL:</strong> ${e.selectedSiteInfo.site}
					</div>
				</div>
				
			</div>
		`,this.setupEventHandlers(a)}setupEventHandlers(a){}async completeWizard(){let a=this.getState();try{this.stateManager.buildFinalSettings();let e=this.plugin.settings;await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new le.Notice("Configuration applied successfully!"):new le.Notice("Failed to apply configuration. Check the console for errors."),this.stateManager.updateState({currentStep:this.stateManager.getState().totalSteps})}catch(e){new le.Notice(`Error completing wizard: ${e instanceof Error?e.message:String(e)}`)}}formatTemplateName(a){let e=A.find(n=>n.id===a);return e?e.name:a}formatThemeName(a){let e=M.find(n=>n.id===a);return e?e.name:a}formatContentOrganization(a){return a==="file-based"?"File-based":"Folder-based"}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return a}}};var w=class extends Re.Modal{constructor(e,n){super(e);this.plugin=n,this.stateManager=new X(n),this.steps=[new Z(e,this,this.stateManager,this.plugin),new ee(e,this,this.stateManager,this.plugin),new te(e,this,this.stateManager,this.plugin),new ae(e,this,this.stateManager,this.plugin),new ne(e,this,this.stateManager,this.plugin),new se(e,this,this.stateManager,this.plugin),new oe(e,this,this.stateManager,this.plugin),new ie(e,this,this.stateManager,this.plugin),new re(e,this,this.stateManager,this.plugin),new ce(e,this,this.stateManager,this.plugin)]}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("astro-modular-wizard"),this.renderCurrentStep()}onClose(){let{contentEl:e}=this;e.empty()}renderCurrentStep(){let{contentEl:e}=this,n=this.stateManager.getState();e.empty(),e.addClass("astro-modular-wizard"),this.renderHeader(e),this.renderProgress(e);let t=e.createDiv("wizard-content");this.renderStepContent(t),this.renderFooter(e)}renderHeader(e){let n=e.createDiv("wizard-header");n.innerHTML=`
			<h1>Astro Modular Setup</h1>
		`}renderProgress(e){let n=this.stateManager.getState(),t=e.createDiv("wizard-progress");t.innerHTML=`
			<div class="progress-bar">
				<div class="progress-fill" style="width: ${this.stateManager.getProgress()}%"></div>
			</div>
			<div class="progress-text">Step ${n.currentStep} of ${n.totalSteps}</div>
		`}async renderStepContent(e){let t=this.stateManager.getState().currentStep-1;t>=0&&t<this.steps.length&&await this.steps[t].render(e)}renderFooter(e){let n=this.stateManager.getState(),s=e.createDiv("wizard-footer").createDiv("wizard-buttons");if(this.stateManager.canGoPrevious()&&s.createEl("button",{text:"Previous",cls:"mod-button"}).addEventListener("click",()=>{this.stateManager.previousStep(),this.renderCurrentStep()}),this.stateManager.canGoNext()?s.createEl("button",{text:"Next",cls:"mod-button mod-cta"}).addEventListener("click",()=>{this.stateManager.nextStep(),this.renderCurrentStep()}):s.createEl("button",{text:"Complete Setup",cls:"mod-button mod-cta"}).addEventListener("click",async()=>{await this.steps[this.steps.length-1].completeWizard(),await this.plugin.saveData(this.plugin.settings),this.plugin.triggerSettingsRefresh(),this.close()}),this.stateManager.canGoNext()&&n.currentStep>1){let i=s.createEl("button",{text:"Skip",cls:"mod-button"});i.style.opacity="0.6",i.addEventListener("click",()=>{this.applyDefaultValuesForCurrentStep(),this.stateManager.nextStep(),this.renderCurrentStep()})}}applyDefaultValuesForCurrentStep(){switch(this.stateManager.getState().currentStep-1){case 1:this.stateManager.setState({selectedTemplate:"standard"});break;case 2:this.stateManager.setState({selectedTheme:"oxygen"});break;case 3:this.stateManager.setState({selectedTypography:{fontSource:"local",proseFont:"Inter",headingFont:"Inter",monoFont:"JetBrains Mono",customFonts:{prose:"",heading:"",mono:"",urls:""}}});break;case 4:this.stateManager.setState({selectedContentOrg:"file-based"});break;case 5:break;case 6:this.stateManager.setState({selectedOptionalFeatures:{profilePicture:{enabled:!1,image:"/profile.jpg",alt:"Profile picture",size:"md",url:"",placement:"footer",style:"circle"},comments:{enabled:!1,provider:"giscus"}}});break;case 7:this.stateManager.setState({selectedDeployment:"netlify"});break;case 8:break}}};function $e(h){h.addCommand({id:"open-settings",name:"Open Astro Modular Settings",callback:()=>{h.app.setting.open(),h.app.setting.openTabById(h.manifest.id)}}),h.addCommand({id:"run-setup-wizard",name:"Run Setup Wizard",callback:()=>{new w(h.app,h).open()}}),h.addCommand({id:"open-config",name:"Open config.ts",callback:async()=>{h.app.vault.getAbstractFileByPath("astro.config.ts")?await h.app.workspace.openLinkText("","astro.config.ts"):new pe.Notice("Config file not found. Make sure you have an Astro project in this vault.")}}),h.addCommand({id:"apply-configuration",name:"Apply Current Configuration",callback:async()=>{new pe.Notice("Configuration applied successfully!")}}),h.addCommand({id:"toggle-wizard-startup",name:"Toggle Wizard on Startup",callback:async()=>{let a=h.settings;a.runWizardOnStartup=!a.runWizardOnStartup,await h.saveData(a),new pe.Notice(`Wizard on startup ${a.runWizardOnStartup?"enabled":"disabled"}`)}})}var Be=require("obsidian");var De=require("obsidian");var D=require("obsidian"),v=class{constructor(a,e){this.app=a,this.plugin=e}getSettings(){return this.plugin.settings}async applyCurrentConfiguration(a=!1){try{let e=this.getSettings();await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?(a&&new D.Notice("Configuration applied successfully!"),await this.plugin.configManager.triggerRebuild()):a&&new D.Notice("Failed to apply configuration. Check the console for errors.")}catch(e){a&&new D.Notice(`Error applying configuration: ${e instanceof Error?e.message:String(e)}`)}}createDropdownSetting(a,e,n,t,s,i){return new D.Setting(a).setName(e).setDesc(n).addDropdown(o=>(Object.entries(s).forEach(([l,r])=>{o.addOption(l,r)}),o.setValue(t),o.onChange(async l=>{i(l),await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!0)}),o))}createTextSetting(a,e,n,t,s,i=1e3){return new D.Setting(a).setName(e).setDesc(n).addText(o=>{o.setValue(t);let l=null;return o.onChange(async r=>{l&&clearTimeout(l),s(r),await this.plugin.saveData(this.getSettings()),l=window.setTimeout(async()=>{await this.applyCurrentConfiguration(!0)},i)}),o.inputEl.addEventListener("blur",async()=>{l&&(clearTimeout(l),await this.applyCurrentConfiguration(!0))}),o})}createToggleSetting(a,e,n,t,s){return new D.Setting(a).setName(e).setDesc(n).addToggle(i=>(i.setValue(t),i.onChange(async o=>{s(o),await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!0)}),i))}};var de=class extends v{render(a){var m,f;a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"General Settings"}),s=n.createEl("p",{text:"Configure basic plugin behavior and view current status."}),o=a.createDiv("config-display").createDiv("config-info"),l=o.createEl("h3",{text:"Current Configuration"}),r=o.createDiv("config-item");r.createEl("strong",{text:"Template: "}),r.createSpan({text:((m=A.find(N=>N.id===e.currentTemplate))==null?void 0:m.name)||"Unknown"});let d=o.createDiv("config-item");d.createEl("strong",{text:"Theme: "}),d.createSpan({text:((f=M.find(N=>N.id===e.currentTheme))==null?void 0:f.name)||"Unknown"});let p=o.createDiv("config-item");p.createEl("strong",{text:"Organization: "}),p.createSpan({text:e.contentOrganization==="file-based"?"File-based":"Folder-based"});let c=o.createDiv("config-item");c.createEl("strong",{text:"Deployment: "}),c.createSpan({text:this.formatDeploymentName(e.deployment.platform)});let u=o.createDiv("config-item");u.createEl("strong",{text:"Site Title: "}),u.createSpan({text:e.siteInfo.title});let g=o.createDiv("config-item");g.createEl("strong",{text:"Site URL: "}),g.createSpan({text:e.siteInfo.site}),new De.Setting(a).setName("Setup wizard").setDesc("Run the setup wizard to reconfigure your theme").addButton(N=>N.setButtonText("Run Setup Wizard").setCta().onClick(async()=>{new w(this.app,this.plugin).open()})),new De.Setting(a).setName("Run wizard on startup").setDesc("Show the setup wizard when Obsidian starts (if not disabled)").addToggle(N=>N.setValue(e.runWizardOnStartup).onChange(async y=>{e.runWizardOnStartup=y,await this.plugin.saveData(e)}))}formatDeploymentName(a){switch(a){case"netlify":return"Netlify";case"vercel":return"Vercel";case"github-pages":return"GitHub Pages";default:return a}}};var ue=class extends v{render(a){a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Site Information"}),s=n.createEl("p",{text:"Configure your site metadata and basic information. Changes are applied to your config.ts file immediately."});this.createTextSetting(a,"Site URL","Your site's base URL (e.g., https://yoursite.com)",e.siteInfo.site,i=>{e.siteInfo.site=i}),this.createTextSetting(a,"Site Title","Your site's title",e.siteInfo.title,i=>{e.siteInfo.title=i}),this.createTextSetting(a,"Site Description","A brief description of your site",e.siteInfo.description,i=>{e.siteInfo.description=i}),this.createTextSetting(a,"Author Name","Your name or the site author's name",e.siteInfo.author,i=>{e.siteInfo.author=i}),this.createTextSetting(a,"Language","Your site's primary language (ISO 639-1 code)",e.siteInfo.language,i=>{e.siteInfo.language=i})}};var Le=require("obsidian");var ge=class extends v{constructor(){super(...arguments);this.saveTimeoutId=null}render(e){e.empty();let n=this.getSettings(),t=e.createDiv("settings-section"),s=t.createEl("h2",{text:"Navigation"}),i=t.createEl("p",{text:"Configure your site navigation pages and social links. Changes are applied to your config.ts file immediately."}),o=e.createDiv("settings-section");o.createEl("h3",{text:"Navigation Pages"}),o.createEl("p",{text:"Add or remove pages from your main navigation menu."});let l=o.createDiv("nav-items");l.id="pages-list",l.innerHTML=`
			${n.navigation.pages.map((p,c)=>`
				<div class="nav-item" data-index="${c}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Page Title" value="${p.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="/page-url" value="${p.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${c}">Remove</button>
					</div>
				</div>
			`).join("")}
		`,new Le.Setting(o).setName("Add Page").setDesc("Add a new page to your navigation").addButton(p=>p.setButtonText("+ Add Page").setCta().onClick(async()=>{n.navigation.pages.push({title:"New Page",url:"/new-page"}),await this.plugin.saveData(n),await this.applyCurrentConfiguration(),this.render(e)}));let r=e.createDiv("settings-section");r.createEl("h3",{text:"Social Links"}),r.createEl("p",{text:"Configure your social media links in the footer."});let d=r.createDiv("nav-items");d.id="social-list",d.innerHTML=`
			${n.navigation.social.map((p,c)=>`
				<div class="nav-item" data-index="${c}" draggable="true">
					<div class="nav-item-content">
						<div class="nav-item-fields">
							<input type="text" class="nav-title" placeholder="Social Title" value="${p.title}" draggable="false">
							<input type="text" class="nav-url" placeholder="https://example.com" value="${p.url}" draggable="false">
						</div>
						<button class="nav-remove mod-warning" data-index="${c}">Remove</button>
					</div>
					<div class="nav-icon-row">
						<input type="text" class="nav-icon" placeholder="icon-name" value="${p.icon||""}" draggable="false">
						<div class="nav-icon-help">
							<small>Icon names from FontAwesome Brands</small>
						</div>
					</div>
				</div>
			`).join("")}
		`,new Le.Setting(r).setName("Add Social Link").setDesc("Add a new social media link").addButton(p=>p.setButtonText("+ Add Social Link").setCta().onClick(async()=>{n.navigation.social.push({title:"New Social",url:"https://example.com",icon:""}),await this.plugin.saveData(n),await this.applyCurrentConfiguration(),this.render(e)})),this.setupEventDelegation(e),this.setupDragAndDrop(e)}setupDragAndDrop(e){let n=null;e.addEventListener("dragstart",t=>{let s=t.target;s.classList.contains("nav-item")&&(n=s,s.style.opacity="0.5")}),e.addEventListener("dragend",t=>{let s=t.target;s.classList.contains("nav-item")&&(s.style.opacity="1",n=null)}),e.addEventListener("dragover",t=>{t.preventDefault();let s=t.target;if(s.classList.contains("nav-item")&&n&&s!==n){let i=s.getBoundingClientRect(),o=i.top+i.height/2;t.clientY<o?(s.style.borderTop="2px solid var(--interactive-accent)",s.style.borderBottom="none"):(s.style.borderBottom="2px solid var(--interactive-accent)",s.style.borderTop="none")}}),e.addEventListener("dragleave",t=>{let s=t.target;s.classList.contains("nav-item")&&(s.style.borderTop="none",s.style.borderBottom="none")}),e.addEventListener("drop",async t=>{t.preventDefault();let s=t.target;if(s.classList.contains("nav-item")&&n){let i=parseInt(s.getAttribute("data-index")||"0"),o=parseInt(n.getAttribute("data-index")||"0"),l=s.closest("#pages-list"),r=s.closest("#social-list");if(s.style.borderTop="none",s.style.borderBottom="none",i!==o){let d=this.getSettings();if(l){let p=[...d.navigation.pages],c=p.splice(o,1)[0];p.splice(i,0,c),d.navigation.pages=p}else if(r){let p=[...d.navigation.social],c=p.splice(o,1)[0];p.splice(i,0,c),d.navigation.social=p}await this.plugin.saveData(d),await this.applyCurrentConfiguration(),this.render(e)}}})}setupEventDelegation(e){var t,s;let n=this.getSettings();(t=e.querySelector("#pages-list"))==null||t.addEventListener("input",i=>{let o=i.target;if(o.classList.contains("nav-title")||o.classList.contains("nav-url")){let l=o.closest(".nav-item"),r=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=o.classList.contains("nav-title")?"title":"url";n.navigation.pages[r][d]=o.value,this.debouncedSave()}}),(s=e.querySelector("#social-list"))==null||s.addEventListener("input",i=>{let o=i.target;if(o.classList.contains("nav-title")||o.classList.contains("nav-url")||o.classList.contains("nav-icon")){let l=o.closest(".nav-item"),r=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0"),d=o.classList.contains("nav-title")?"title":o.classList.contains("nav-url")?"url":"icon";n.navigation.social[r][d]=o.value,this.debouncedSave()}}),e.addEventListener("click",async i=>{let o=i.target;if(o.classList.contains("nav-remove")){let l=o.closest(".nav-item"),r=parseInt((l==null?void 0:l.getAttribute("data-index"))||"0");(l==null?void 0:l.closest("#pages-list"))?n.navigation.pages.splice(r,1):n.navigation.social.splice(r,1),await this.plugin.saveData(n),await this.applyCurrentConfiguration(),this.render(e)}})}debouncedSave(){this.saveTimeoutId&&clearTimeout(this.saveTimeoutId),this.saveTimeoutId=window.setTimeout(async()=>{await this.plugin.saveData(this.getSettings()),await this.applyCurrentConfiguration(!1)},1e3)}};var E=require("obsidian");var He=require("obsidian"),me=class extends He.Modal{constructor(e,n,t,s){super(e);this.changes=n,this.onConfirm=t,this.onCancel=s}onOpen(){let{contentEl:e}=this;e.empty();let n=e.createEl("h2",{text:"Apply Template Preset"});n.style.marginTop="0";let t=e.createEl("p",{text:"Applying this template will change the following settings:"});t.style.marginBottom="16px";let s=e.createEl("ul");s.style.marginBottom="24px",s.style.paddingLeft="20px",this.changes.forEach(d=>{let p=s.createEl("li",{text:d});p.style.marginBottom="4px"});let i=e.createEl("p",{text:"Do you want to apply this template?"});i.style.fontWeight="bold",i.style.marginBottom="24px";let o=e.createDiv("modal-button-container");o.style.display="flex",o.style.gap="12px",o.style.justifyContent="flex-end";let l=o.createEl("button",{text:"Cancel"});l.className="mod-cta",l.addEventListener("click",()=>{this.onCancel(),this.close()});let r=o.createEl("button",{text:"Continue"});r.className="mod-warning",r.addEventListener("click",()=>{this.onConfirm(),this.close()}),r.focus()}onClose(){let{contentEl:e}=this;e.empty()}};var fe=class extends v{render(a){var i;a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Configuration"}),s=n.createEl("p",{text:"Configure your template and content organization. Changes are applied to your config.ts file immediately."});new E.Setting(a).setName("Template").setDesc("Choose your content template").addDropdown(o=>{A.forEach(l=>{o.addOption(l.id,l.name)}),o.setValue(e.currentTemplate),o.onChange(async l=>{let r=this.getTemplateChanges(l);new me(this.app,r,async()=>{try{await this.updatePluginSettingsWithTemplate(l),await this.plugin.configManager.applyPreset({name:e.currentTemplate,description:"",features:e.features,theme:e.currentTheme,contentOrganization:e.contentOrganization,config:e})?new E.Notice(`Template changed to ${l} and applied to config.ts`):new E.Notice("Failed to apply template to config.ts")}catch(p){new E.Notice(`Failed to apply template change: ${p instanceof Error?p.message:String(p)}`),o.setValue(e.currentTemplate)}},()=>{o.setValue(e.currentTemplate)}).open()})}),new E.Setting(a).setName("Content organization").setDesc("Choose how to organize your content and assets").addDropdown(o=>{o.addOption("file-based","File-based"),o.addOption("folder-based","Folder-based"),o.setValue(e.contentOrganization),o.onChange(async l=>{e.contentOrganization=l,await this.plugin.saveData(e);try{await this.plugin.pluginManager.configurePlugins(e.pluginConfig),new E.Notice(`Content organization changed to ${l} and plugins configured`)}catch(r){new E.Notice(`Failed to configure plugins for content organization: ${r instanceof Error?r.message:String(r)}`)}})}),new E.Setting(a).setName("Deployment").setDesc("Choose your deployment platform").addDropdown(o=>{o.addOption("netlify","Netlify"),o.addOption("vercel","Vercel"),o.addOption("github-pages","GitHub Pages"),o.setValue(e.deployment.platform),o.onChange(async l=>{e.deployment.platform=l,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new E.Notice(`Deployment platform changed to ${l} and applied to config.ts`)}catch(r){new E.Notice(`Failed to apply deployment platform change: ${r instanceof Error?r.message:String(r)}`)}})}),new E.Setting(a).setName("Reset to Template").setDesc(`Reset all settings to the current template (${(i=A.find(o=>o.id===e.currentTemplate))==null?void 0:i.name})`).addButton(o=>o.setButtonText("Reset to Template").setWarning().onClick(async()=>{try{let l=this.plugin.configManager.getTemplatePreset(e.currentTemplate);l?(Object.assign(e,l.config),await this.plugin.saveData(e),await this.applyCurrentConfiguration(!0),new E.Notice(`Reset to ${e.currentTemplate} template and applied to config.ts`)):new E.Notice("Template not found")}catch(l){new E.Notice(`Failed to reset to template: ${l instanceof Error?l.message:String(l)}`)}})),new E.Setting(a).setName("Edit config.ts directly").setDesc("Open your Astro configuration file in the editor").addButton(o=>o.setButtonText("Open config.ts").onClick(async()=>{await this.openConfigFile()}))}async openConfigFile(){try{let a=require("fs"),e=require("path"),{shell:n}=require("electron"),t=this.app.vault.adapter.basePath||this.app.vault.adapter.path,s=typeof t=="string"?t:t.toString(),i=e.join(s,"..","config.ts");a.existsSync(i)?n.openPath(i):new E.Notice(`Config file not found at: ${i}`)}catch(a){new E.Notice(`Error opening config file: ${a instanceof Error?a.message:String(a)}`)}}async updatePluginSettingsWithTemplate(a){let e=this.plugin.settings,n=this.plugin.configManager.getTemplatePreset(a);if(!n||!n.config){new E.Notice("Template preset not found");return}if(e.currentTemplate=a,n.config.features){let s=e.features.comments,i=e.features.profilePicture;e.features={...e.features,...n.config.features},e.features.comments=s,e.features.profilePicture=i}let t=a==="standard"||a==="custom";e.optionalContentTypes={projects:t,docs:t},await this.plugin.saveData(e)}getTemplateChanges(a){var l,r,d,p;let e=[],n=this.getSettings(),t=this.plugin.configManager.getTemplatePreset(a);if(!t||!t.config)return e.push("This will apply the template settings to your configuration."),e;let s=t.config,i=[];s.features&&([{key:"graphView",label:"Graph view"},{key:"tableOfContents",label:"Table of contents"},{key:"readingTime",label:"Reading time"},{key:"linkedMentions",label:"Linked mentions"},{key:"linkedMentionsCompact",label:"Compact linked mentions"},{key:"postNavigation",label:"Post navigation"},{key:"showSocialIconsInFooter",label:"Social icons in footer"},{key:"featureButton",label:"Feature button"}].forEach(({key:u,label:g})=>{let m=n.features[u],f=s.features[u];if(f!==void 0&&m!==f){let N=typeof m=="boolean"?m?"ON":"OFF":m,y=typeof f=="boolean"?f?"ON":"OFF":f;i.push(`${g}: ${N} \u2192 ${y}`)}}),s.features.quickActions&&n.features.quickActions&&s.features.quickActions.enabled!==n.features.quickActions.enabled&&i.push(`Quick actions: ${n.features.quickActions.enabled?"ON":"OFF"} \u2192 ${s.features.quickActions.enabled?"ON":"OFF"}`));let o=a==="standard"||a==="custom";return((l=n.optionalContentTypes)==null?void 0:l.projects)!==o&&i.push(`Projects content type: ${(r=n.optionalContentTypes)!=null&&r.projects?"enabled":"disabled"} \u2192 ${o?"enabled":"disabled"}`),((d=n.optionalContentTypes)==null?void 0:d.docs)!==o&&i.push(`Docs content type: ${(p=n.optionalContentTypes)!=null&&p.docs?"enabled":"disabled"} \u2192 ${o?"enabled":"disabled"}`),i.length>0?e.push(...i):e.push("No changes needed - your settings already match this template."),e}};var P=require("obsidian");var he=class extends v{render(a){var o,l,r,d;a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Style"}),s=n.createEl("p",{text:"Configure your theme and typography settings. Changes are applied to your config.ts file immediately."});new P.Setting(a).setName("Theme").setDesc("Choose your color theme").addDropdown(p=>{M.forEach(c=>{p.addOption(c.id,c.name)}),p.setValue(e.currentTheme),p.onChange(async c=>{e.currentTheme=c,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new P.Notice(`Theme changed to ${c} and applied to config.ts`)}catch(u){new P.Notice(`Failed to apply theme change: ${u instanceof Error?u.message:String(u)}`)}})});let i=a.createDiv("settings-section");i.createEl("h3",{text:"Typography"}),i.createEl("p",{text:"Configure your font settings."}),new P.Setting(i).setName("Heading Font").setDesc("Font for headings and titles").addDropdown(p=>{k.forEach(c=>{p.addOption(c,c)}),p.setValue(e.typography.headingFont),p.onChange(async c=>{e.typography.headingFont=c,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new P.Notice("Heading font updated and applied to config.ts")}catch(u){new P.Notice(`Failed to apply heading font change: ${u instanceof Error?u.message:String(u)}`)}})}),new P.Setting(i).setName("Prose Font").setDesc("Font for body text and content").addDropdown(p=>{k.forEach(c=>{p.addOption(c,c)}),p.setValue(e.typography.proseFont),p.onChange(async c=>{e.typography.proseFont=c,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new P.Notice("Prose font updated and applied to config.ts")}catch(u){new P.Notice(`Failed to apply prose font change: ${u instanceof Error?u.message:String(u)}`)}})}),new P.Setting(i).setName("Monospace Font").setDesc("Font for code blocks and technical content").addDropdown(p=>{k.forEach(c=>{p.addOption(c,c)}),p.setValue(e.typography.monoFont),p.onChange(async c=>{e.typography.monoFont=c,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new P.Notice("Monospace font updated and applied to config.ts")}catch(u){new P.Notice(`Failed to apply monospace font change: ${u instanceof Error?u.message:String(u)}`)}})}),new P.Setting(i).setName("Font Source").setDesc("How fonts are loaded").addDropdown(p=>{p.addOption("local","Local (Google Fonts)"),p.addOption("cdn","CDN (Custom)"),p.setValue(e.typography.fontSource),p.onChange(async c=>{e.typography.fontSource=c,await this.plugin.saveData(e),this.render(a);try{await this.applyCurrentConfiguration(),new P.Notice(`Font source changed to ${c} and applied to config.ts`)}catch(u){new P.Notice(`Failed to apply font source change: ${u instanceof Error?u.message:String(u)}`)}})}),e.typography.fontSource==="cdn"&&(this.createTextSetting(i,"Custom Font URLs","Comma-separated font URLs",((o=e.typography.customFonts)==null?void 0:o.heading)||"",p=>{e.typography.customFonts||(e.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),e.typography.customFonts.heading=p}),this.createTextSetting(i,"Custom Heading Font Name","Name of the custom heading font",((l=e.typography.customFonts)==null?void 0:l.heading)||"",p=>{e.typography.customFonts||(e.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),e.typography.customFonts.heading=p}),this.createTextSetting(i,"Custom Prose Font Name","Name of the custom prose font",((r=e.typography.customFonts)==null?void 0:r.prose)||"",p=>{e.typography.customFonts||(e.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),e.typography.customFonts.prose=p}),this.createTextSetting(i,"Custom Monospace Font Name","Name of the custom monospace font",((d=e.typography.customFonts)==null?void 0:d.mono)||"",p=>{e.typography.customFonts||(e.typography.customFonts={heading:"",prose:"",mono:"",urls:""}),e.typography.customFonts.mono=p}))}};var S=require("obsidian");var Oe=class extends v{render(a){a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Feature Configuration"}),s=n.createEl("p",{text:"Enable or disable specific features for your site. Changes are applied to your config.ts file immediately when you toggle them."});new S.Setting(a).setName("Enable Projects").setDesc("Enable projects as a unique content type for showcasing work and portfolios").addToggle(c=>c.setValue(e.optionalContentTypes.projects).onChange(async u=>{e.optionalContentTypes.projects=u,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new S.Notice(`Projects ${u?"enabled":"disabled"} and applied to config.ts`)}catch(g){new S.Notice(`Failed to apply projects setting to config.ts: ${g instanceof Error?g.message:String(g)}`)}})),new S.Setting(a).setName("Enable Docs").setDesc("Enable docs as a unique content type for documentation and knowledge base").addToggle(c=>c.setValue(e.optionalContentTypes.docs).onChange(async u=>{e.optionalContentTypes.docs=u,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new S.Notice(`Docs ${u?"enabled":"disabled"} and applied to config.ts`)}catch(g){new S.Notice(`Failed to apply docs setting to config.ts: ${g instanceof Error?g.message:String(g)}`)}})),[{key:"commandPalette",name:"Command palette",desc:"Add a command palette to your site"},{key:"tableOfContents",name:"Table of contents",desc:"Show table of contents on posts"},{key:"readingTime",name:"Reading time",desc:"Display estimated reading time"},{key:"linkedMentions",name:"Linked mentions",desc:"Show linked mentions and backlinks"},{key:"graphView",name:"Graph view",desc:"Show graph view of post connections"},{key:"postNavigation",name:"Post navigation",desc:"Show next/previous post navigation"},{key:"scrollToTop",name:"Scroll to top",desc:"Show scroll to top button"},{key:"showSocialIconsInFooter",name:"Social icons in footer",desc:"Show social icons in footer"},{key:"profilePicture",name:"Profile picture",desc:"Show profile picture in header"},{key:"comments",name:"Comments",desc:"Enable comment system"}].forEach(c=>{let u=this.getSettings(),g=c.key,m=u.features[g],f=typeof m=="boolean"?m:!1;c.key==="profilePicture"?this.renderProfilePictureSetting(a,u):c.key==="comments"?this.renderCommentsSetting(a,u):new S.Setting(a).setName(c.name).setDesc(c.desc).addToggle(N=>N.setValue(f).onChange(async y=>{u.features[g]=y,await this.plugin.saveData(u);try{await this.applyCurrentConfiguration(),new S.Notice(`${c.name} ${y?"enabled":"disabled"} and applied to config.ts`)}catch(C){new S.Notice(`Failed to apply ${c.name} to config.ts: ${C instanceof Error?C.message:String(C)}`)}}))}),new S.Setting(a).setName("Feature button").setDesc("Choose which feature button appears in the header").addDropdown(c=>c.addOption("mode","Mode Toggle").addOption("graph","Graph View").addOption("theme","Theme Selector").addOption("none","None").setValue(e.features.featureButton).onChange(async u=>{e.features.featureButton=u,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new S.Notice(`Feature button updated to "${u}" and applied to config.ts`)}catch(g){new S.Notice(`Failed to apply feature button to config.ts: ${g instanceof Error?g.message:String(g)}`)}}));let o=a.createDiv("quick-actions-section");o.style.marginTop="20px",o.style.paddingTop="20px",o.style.borderTop="1px solid var(--background-modifier-border)";let l=o.createEl("h3",{text:"Command Palette Quick Actions"}),r=o.createEl("p",{text:"Control which quick actions appear in the command palette",cls:"setting-item-description"});new S.Setting(o).setName("Enable Quick Actions in Command Palette").setDesc("Master toggle for all quick actions").addToggle(c=>c.setValue(e.features.quickActions.enabled).onChange(async u=>{e.features.quickActions.enabled=u,await this.plugin.saveData(e),o.querySelectorAll(".individual-quick-action").forEach(m=>{m.style.display=u?"block":"none"});try{await this.applyCurrentConfiguration(),new S.Notice(`Quick actions ${u?"enabled":"disabled"} and applied to config.ts`)}catch(m){new S.Notice(`Failed to apply quick actions to config.ts: ${m instanceof Error?m.message:String(m)}`)}})),[{key:"toggleMode",name:"Toggle Light/Dark Mode",desc:"Show mode toggle button in command palette"},{key:"graphView",name:"Graph View",desc:"Show graph view button in command palette"},{key:"changeTheme",name:"Change Theme",desc:"Show theme selector button in command palette"}].forEach(c=>{let u=o.createDiv("individual-quick-action");u.style.display=e.features.quickActions.enabled?"block":"none",new S.Setting(u).setName(c.name).setDesc(c.desc).addToggle(g=>g.setValue(e.features.quickActions[c.key]).onChange(async m=>{e.features.quickActions[c.key]=m,await this.plugin.saveData(e);try{await this.applyCurrentConfiguration(),new S.Notice(`${c.name} ${m?"enabled":"disabled"} and applied to config.ts`)}catch(f){new S.Notice(`Failed to apply ${c.name} to config.ts: ${f instanceof Error?f.message:String(f)}`)}}))}),a.createDiv("settings-section").createEl("p",{text:"All changes are applied to your config.ts file immediately when you toggle features.",cls:"setting-item-description"})}renderProfilePictureSetting(a,e){let n=e.features.profilePicture,t=e.optionalFeatures.profilePicture,s=new S.Setting(a).setName("Profile picture").setDesc("Show profile picture in header or footer").addToggle(l=>l.setValue(n).onChange(async r=>{e.features.profilePicture=r,e.optionalFeatures.profilePicture.enabled=r,await this.plugin.saveData(e);let d=a.querySelector(".profile-picture-options");d&&(d.style.display=r?"block":"none");try{await this.applyCurrentConfiguration(),new S.Notice(`Profile picture ${r?"enabled":"disabled"} and applied to config.ts`)}catch(p){new S.Notice(`Failed to apply profile picture to config.ts: ${p instanceof Error?p.message:String(p)}`)}})),i=a.createDiv("profile-picture-options");i.style.display=n?"block":"none",i.style.marginTop="10px",i.style.paddingLeft="20px",i.style.borderLeft="2px solid var(--background-modifier-border)";let o=i.createDiv("options-grid");o.style.display="grid",o.style.gridTemplateColumns="1fr 1fr",o.style.gap="10px",o.style.marginTop="10px",new S.Setting(o).setName("Image path").setDesc("Path to the profile picture image").addText(l=>l.setValue(t.image).setPlaceholder("/profile.jpg").onChange(async r=>{t.image=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(o).setName("Alt text").setDesc("Alternative text for the profile picture").addText(l=>l.setValue(t.alt).setPlaceholder("Profile picture").onChange(async r=>{t.alt=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(o).setName("Size").setDesc("Size of the profile picture").addDropdown(l=>l.addOption("sm","Small").addOption("md","Medium").addOption("lg","Large").setValue(t.size).onChange(async r=>{t.size=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(o).setName("URL (optional)").setDesc("Optional URL to link the profile picture to").addText(l=>l.setValue(t.url||"").setPlaceholder("https://example.com").onChange(async r=>{t.url=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(o).setName("Placement").setDesc("Where to show the profile picture").addDropdown(l=>l.addOption("footer","Footer").addOption("header","Header").setValue(t.placement).onChange(async r=>{t.placement=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(o).setName("Style").setDesc("Visual style of the profile picture").addDropdown(l=>l.addOption("circle","Circle").addOption("square","Square").addOption("none","None").setValue(t.style).onChange(async r=>{t.style=r,await this.plugin.saveData(e),await this.applyCurrentConfiguration()}))}renderCommentsSetting(a,e){let n=e.features.comments,t=e.optionalFeatures.comments||{enabled:!1,provider:"giscus",repo:"davidvkimball/astro-modular",repoId:"R_kgDOPllfKw",category:"General",categoryId:"DIC_kwDOPllfK84CvUpx",mapping:"pathname",strict:"0",reactions:"1",metadata:"0",inputPosition:"bottom",theme:"preferred_color_scheme",lang:"en",loading:"lazy"},s=new S.Setting(a).setName("Comments").setDesc("Enable Giscus comment system for posts").addToggle(p=>p.setValue(n).onChange(async c=>{e.features.comments=c,e.optionalFeatures.comments.enabled=c,await this.plugin.saveData(e);let u=a.querySelector(".comments-options");u&&(u.style.display=c?"block":"none");try{await this.applyCurrentConfiguration(),new S.Notice(`Comments system ${c?"enabled":"disabled"} and applied to config.ts`)}catch(g){new S.Notice(`Failed to apply comments system to config.ts: ${g instanceof Error?g.message:String(g)}`)}})),i=a.createDiv("comments-options");i.style.display=n?"block":"none",i.style.marginTop="10px",i.style.paddingLeft="20px",i.style.borderLeft="2px solid var(--background-modifier-border)";let o=i.createDiv("giscus-setup-link");o.style.marginBottom="15px",o.style.padding="10px",o.style.background="var(--background-modifier-border)",o.style.borderRadius="4px",o.style.borderLeft="3px solid var(--interactive-accent)";let l=o.createEl("p",{text:"Need help setting up Giscus? "});l.style.margin="0",l.style.fontSize="13px",l.style.color="var(--text-muted)";let r=l.createEl("a",{text:"Visit giscus.app \u2192",href:"https://giscus.app/",attr:{target:"_blank",rel:"noopener noreferrer"}});r.style.color="var(--interactive-accent)",r.style.textDecoration="none",r.addEventListener("mouseenter",()=>{r.style.textDecoration="underline"}),r.addEventListener("mouseleave",()=>{r.style.textDecoration="none"});let d=i.createDiv("options-grid");d.style.display="grid",d.style.gridTemplateColumns="1fr 1fr",d.style.gap="10px",d.style.marginTop="10px",new S.Setting(d).setName("Repository").setDesc("GitHub repository for comments (username/repo)").addText(p=>p.setValue(t.repo).setPlaceholder("username/repo").onChange(async c=>{t.repo=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Repository ID").setDesc("GitHub repository ID for Giscus").addText(p=>p.setValue(t.repoId).setPlaceholder("R_kgDOPllfKw").onChange(async c=>{t.repoId=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Category").setDesc("Discussion category name").addText(p=>p.setValue(t.category).setPlaceholder("General").onChange(async c=>{t.category=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Category ID").setDesc("Discussion category ID for Giscus").addText(p=>p.setValue(t.categoryId).setPlaceholder("DIC_kwDOPllfK84CvUpx").onChange(async c=>{t.categoryId=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Mapping").setDesc("How to map discussions to pages").addDropdown(p=>p.addOption("pathname","Pathname").addOption("url","URL").addOption("title","Title").addOption("og:title","OG Title").setValue(t.mapping).onChange(async c=>{t.mapping=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Strict").setDesc("Only match discussions with the same category").addDropdown(p=>p.addOption("0","No").addOption("1","Yes").setValue(t.strict).onChange(async c=>{t.strict=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Reactions").setDesc("Enable reaction buttons").addDropdown(p=>p.addOption("0","Disabled").addOption("1","Enabled").setValue(t.reactions).onChange(async c=>{t.reactions=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Metadata").setDesc("Show metadata in comments").addDropdown(p=>p.addOption("0","Disabled").addOption("1","Enabled").setValue(t.metadata).onChange(async c=>{t.metadata=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Input Position").setDesc("Where to place the comment input").addDropdown(p=>p.addOption("top","Top").addOption("bottom","Bottom").setValue(t.inputPosition).onChange(async c=>{t.inputPosition=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Theme").setDesc("Comments theme").addDropdown(p=>p.addOption("light","Light").addOption("dark","Dark").addOption("preferred_color_scheme","Auto").setValue(t.theme).onChange(async c=>{t.theme=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Language").setDesc("Comments interface language").addDropdown(p=>p.addOption("en","English").addOption("es","Spanish").addOption("fr","French").addOption("de","German").addOption("ja","Japanese").addOption("ko","Korean").addOption("zh-CN","Chinese (Simplified)").addOption("zh-TW","Chinese (Traditional)").setValue(t.lang).onChange(async c=>{t.lang=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()})),new S.Setting(d).setName("Loading").setDesc("When to load comments").addDropdown(p=>p.addOption("lazy","Lazy").addOption("eager","Eager").setValue(t.loading).onChange(async c=>{t.loading=c,await this.plugin.saveData(e),await this.applyCurrentConfiguration()}))}};var L=require("obsidian");var Te=class extends v{async render(a){a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Plugin Configuration"}),s=n.createEl("p",{text:"Manage your Obsidian plugins and their settings."}),i=await this.plugin.pluginManager.getPluginStatus(),l=a.createDiv("plugin-status-container").createDiv("plugin-status");for(let r of i){let d=l.createDiv(`plugin-item ${r.installed?"installed":"missing"}`),p=d.createDiv("plugin-icon");p.innerHTML=r.installed?'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>':'<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6L6 18M6 6l12 12"/></svg>';let c=d.createDiv("plugin-info");c.createEl("h3",{text:r.name});let u=r.installed?r.enabled?"Enabled":"Disabled":"Not installed";c.createEl("p",{text:u})}new L.Setting(a).setName("Configure automatically").setDesc("Automatically configure all installed plugins").addButton(r=>r.setButtonText("Configure Automatically").setCta().onClick(async()=>{let d=e.contentOrganization,p={obsidianSettings:{attachmentLocation:d==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:d==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}};if(await this.plugin.pluginManager.configurePlugins(p)){let u=e.contentOrganization,g=u==="file-based"?"subfolder (attachments/)":"same folder",m=u==="file-based"?"file":"folder";new L.Notice(`Plugins configured successfully!

\u2022 Obsidian: Attachments \u2192 ${g}
\u2022 Astro Composer: Creation mode \u2192 ${m}
\u2022 Image Inserter: Format updated for ${u}`,8e3)}else new L.Notice("\u26A0\uFE0F Some plugins could not be configured automatically. Check console for details.",5e3)})),new L.Setting(a).setName("Show manual instructions").setDesc("Get step-by-step instructions for manual configuration").addButton(r=>r.setButtonText("Show Manual Instructions").onClick(async()=>{let d=e.contentOrganization,p={obsidianSettings:{attachmentLocation:d==="file-based"?"subfolder":"same-folder",subfolderName:"attachments"},astroComposerSettings:{creationMode:d==="file-based"?"file":"folder",indexFileName:"index"},imageInserterSettings:{valueFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]",insertFormat:d==="file-based"?"[[attachments/{image-url}]]":"[[{image-url}]]"}},c=await this.plugin.pluginManager.getManualConfigurationInstructions(p),u=new L.Modal(this.app);u.titleEl.setText("Manual Configuration Instructions");let g=u.contentEl.createDiv();g.style.padding="20px",g.style.lineHeight="1.6";let m=c.split(`
`),f=null;m.forEach(N=>{let y=N.trim();if(y==="")g.createEl("br");else if(y.startsWith("## ")){f&&(f=null);let C=g.createEl("h2");C.setText(y.substring(3)),C.style.marginTop="20px",C.style.marginBottom="10px",C.style.fontSize="1.2em",C.style.fontWeight="bold"}else if(y.match(/^\d+\.\s/)){f||(f=g.createEl("ol"),f.style.marginLeft="20px",f.style.marginBottom="15px");let C=f.createEl("li");C.style.marginBottom="5px",this.parseBoldText(C,y.replace(/^\d+\.\s/,""))}else if(y.startsWith("- ")||y.startsWith("* ")){f||(f=g.createEl("ul"),f.style.marginLeft="20px",f.style.marginBottom="15px");let C=f.createEl("li");C.style.marginBottom="5px",this.parseBoldText(C,y.substring(2))}else{f&&(f=null);let C=g.createEl("p");C.style.marginBottom="10px",this.parseBoldText(C,y)}}),u.open()}))}parseBoldText(a,e){e.split(/(\*\*.*?\*\*)/g).forEach(t=>{t.startsWith("**")&&t.endsWith("**")?a.createEl("strong").setText(t.substring(2,t.length-2)):t.trim()!==""&&a.appendText(t)})}};var _=require("obsidian");var Ce=class extends v{render(a){a.empty();let e=this.getSettings(),n=a.createDiv("settings-section"),t=n.createEl("h2",{text:"Advanced Settings"}),s=n.createEl("p",{text:"Advanced configuration options and utilities."});new _.Setting(a).setName("Sync from config.ts").setDesc("Read current config.ts file and update plugin settings to match").addButton(i=>i.setButtonText("Sync from config.ts").setCta().onClick(async()=>{var o,l,r,d,p,c,u,g,m,f,N,y,C,b,R,$,H,B,V,U,z,W,q,j;try{let F=await this.plugin.configManager.fileManager.readConfig();if(!F){new _.Notice("Could not read config.ts file");return}let T=await this.plugin.configManager.fileManager.parseConfigFile(F);if(!T){new _.Notice("Could not parse config.ts file");return}let O=this.getSettings();T.siteInfo&&(O.siteInfo.site=(o=T.siteInfo.site)!=null?o:O.siteInfo.site,O.siteInfo.title=(l=T.siteInfo.title)!=null?l:O.siteInfo.title,O.siteInfo.description=(r=T.siteInfo.description)!=null?r:O.siteInfo.description,O.siteInfo.author=(d=T.siteInfo.author)!=null?d:O.siteInfo.author,O.siteInfo.language=(p=T.siteInfo.language)!=null?p:O.siteInfo.language),T.navigation&&(T.navigation.pages&&(O.navigation.pages=T.navigation.pages),T.navigation.social&&(O.navigation.social=T.navigation.social)),T.currentTheme&&(O.currentTheme=T.currentTheme),T.typography&&(O.typography.fontSource=(c=T.typography.fontSource)!=null?c:O.typography.fontSource,O.typography.proseFont=(u=T.typography.proseFont)!=null?u:O.typography.proseFont,O.typography.headingFont=(g=T.typography.headingFont)!=null?g:O.typography.headingFont,O.typography.monoFont=(m=T.typography.monoFont)!=null?m:O.typography.monoFont),T.postOptions&&(O.features.tableOfContents=(f=T.postOptions.tableOfContents)!=null?f:O.features.tableOfContents,O.features.readingTime=(N=T.postOptions.readingTime)!=null?N:O.features.readingTime,O.features.linkedMentions=(C=(y=T.postOptions.linkedMentions)==null?void 0:y.enabled)!=null?C:O.features.linkedMentions,O.features.linkedMentionsCompact=(R=(b=T.postOptions.linkedMentions)==null?void 0:b.linkedMentionsCompact)!=null?R:O.features.linkedMentionsCompact,O.features.graphView=(H=($=T.postOptions.graphView)==null?void 0:$.enabled)!=null?H:O.features.graphView,O.features.postNavigation=(B=T.postOptions.postNavigation)!=null?B:O.features.postNavigation,O.features.comments=(U=(V=T.postOptions.comments)==null?void 0:V.enabled)!=null?U:O.features.comments),T.optionalContentTypes&&(O.optionalContentTypes.projects=(z=T.optionalContentTypes.projects)!=null?z:O.optionalContentTypes.projects,O.optionalContentTypes.docs=(W=T.optionalContentTypes.docs)!=null?W:O.optionalContentTypes.docs),T.footer&&(O.features.showSocialIconsInFooter=(q=T.footer.showSocialIconsInFooter)!=null?q:!1),T.commandPalette&&(O.features.commandPalette=(j=T.commandPalette.enabled)!=null?j:!1),T.theme&&(O.currentTheme=T.theme),T.site&&(O.siteInfo.site=T.site),T.title&&(O.siteInfo.title=T.title),T.description&&(O.siteInfo.description=T.description),T.author&&(O.siteInfo.author=T.author),T.language&&(O.siteInfo.language=T.language),O.currentTemplate="custom",await this.plugin.saveData(O),this.plugin.triggerSettingsRefresh(),new _.Notice("Settings synced from config.ts successfully")}catch(F){new _.Notice(`Failed to sync from config.ts: ${F instanceof Error?F.message:String(F)}`)}})),new _.Setting(a).setName("Reset to defaults").setDesc("Reset all settings to their default values").addButton(i=>i.setButtonText("Reset to Defaults").setWarning().onClick(async()=>{let o=new _.Modal(this.app);o.titleEl.setText("Reset to Defaults");let l=o.contentEl.createDiv();l.createEl("p",{text:"Are you sure you want to reset all configuration settings to defaults?"}),l.createEl("p",{text:"This will preserve your site info and navigation settings."});let r=l.createDiv();r.style.marginTop="20px",r.style.display="flex",r.style.gap="10px",r.style.justifyContent="flex-end";let d=r.createEl("button",{text:"Cancel"});d.className="mod-button",d.addEventListener("click",()=>{o.close()});let p=r.createEl("button",{text:"Reset to Defaults"});p.className="mod-warning",p.addEventListener("click",async()=>{o.close();let c=this.getSettings(),u=c.siteInfo,g=c.navigation,m={...K};m.siteInfo=u,m.navigation=g,this.plugin.settings=m,await this.plugin.saveData(m),await this.plugin.loadSettings();try{await this.applyCurrentConfiguration(),new _.Notice("Configuration reset to defaults and applied to config.ts (site info and navigation preserved)")}catch(f){new _.Notice(`Configuration reset but failed to apply to config.ts: ${f instanceof Error?f.message:String(f)}`)}this.plugin.triggerSettingsRefresh()}),p.focus(),o.open()})),new _.Setting(a).setName("Export configuration").setDesc("Export your current configuration as JSON").addButton(i=>i.setButtonText("Export JSON").onClick(()=>{this.exportConfiguration()})),new _.Setting(a).setName("Import configuration").setDesc("Import configuration from JSON file").addButton(i=>i.setButtonText("Import JSON").onClick(()=>{this.importConfiguration()}))}exportConfiguration(){let a=JSON.stringify(this.getSettings(),null,2),e=new Blob([a],{type:"application/json"}),n=URL.createObjectURL(e),t=document.createElement("a");t.href=n,t.download="astro-modular-config.json",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(n),new _.Notice("Configuration exported successfully!")}importConfiguration(){let a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=async e=>{var t;let n=(t=e.target.files)==null?void 0:t[0];if(n)try{let s=await n.text(),i=JSON.parse(s),o=this.getSettings();Object.assign(o,i),await this.plugin.saveData(o),new _.Notice("Configuration imported successfully!")}catch(s){new _.Notice("Failed to import configuration. Please check the file format.")}},a.click()}};var Se=class extends Be.PluginSettingTab{constructor(e,n){super(e,n);this.plugin=n}display(){this.render()}render(){let{containerEl:e}=this;e.empty(),e.addClass("astro-modular-settings");let n=e.createDiv("tab-container"),t=n.createDiv("tab-nav"),s=n.createDiv("tab-content"),i=[{id:"general",name:"General",description:"Basic settings and configuration overview",renderer:new de(this.app,this.plugin)},{id:"site-info",name:"Site Info",description:"Site information and metadata",renderer:new ue(this.app,this.plugin)},{id:"navigation",name:"Navigation",description:"Navigation pages and social links",renderer:new ge(this.app,this.plugin)},{id:"config",name:"Config",description:"Template and content organization",renderer:new fe(this.app,this.plugin)},{id:"style",name:"Style",description:"Theme and typography settings",renderer:new he(this.app,this.plugin)},{id:"features",name:"Features",description:"Enable or disable theme features",renderer:new Oe(this.app,this.plugin)},{id:"plugins",name:"Plugins",description:"Configure Obsidian plugins",renderer:new Te(this.app,this.plugin)},{id:"advanced",name:"Advanced",description:"Advanced settings and utilities",renderer:new Ce(this.app,this.plugin)}];i.forEach((o,l)=>{let r=t.createEl("button",{text:o.name,cls:`tab-button ${l===0?"active":""}`});r.title=o.description,r.addEventListener("click",()=>{t.querySelectorAll(".tab-button").forEach(d=>d.classList.remove("active")),r.classList.add("active"),s.style.opacity="0",setTimeout(()=>{s.empty(),o.renderer.render(s),s.style.opacity="1"},150)})}),i[0].renderer.render(s)}};var ye=class{constructor(a){this.app=a,this.configPath="../config.ts"}async getConfigFileInfo(){try{let a=require("fs"),e=require("path"),n=this.app.vault.adapter,t=n.basePath||n.path,s=typeof t=="string"?t:t?String(t):"",i=e.join(s,"..","config.ts"),o=e.dirname(i);if(a.existsSync(i)){let l=a.readFileSync(i,"utf8"),r=a.statSync(i);return{exists:!0,path:i,content:l,lastModified:new Date(r.mtime),valid:!0,errors:[]}}else return{exists:!1,path:i,content:"",lastModified:new Date,valid:!1,errors:["Config file not found"]}}catch(a){return{exists:!1,path:this.configPath,content:"",lastModified:new Date,valid:!1,errors:["Cannot access file outside vault"]}}}validateConfigContent(a){return a.includes("defineConfig")||a.includes("export default")||a.includes("astro/config")}async readConfig(){return(await this.getConfigFileInfo()).content}async writeConfig(a){try{let e=require("fs"),n=require("path"),t=this.app.vault.adapter,s=t.basePath||t.path,i=typeof s=="string"?s:s?String(s):"",o=n.join(i,"..","config.ts");return e.writeFileSync(o,a,"utf8"),!0}catch(e){return console.error("Error writing config:",e),!1}}async detectAstroDevServer(){let a=this.app.vault.getAbstractFileByPath("package.json");if(a)try{let e=await this.app.vault.read(a);return e.includes("astro")&&e.includes("dev")}catch(e){return!1}return!1}async parseConfigFile(a){let e=a||await this.readConfig();if(!e)return null;let n={};n.siteInfo={};let t=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"([^"]*)"/);t&&(n.siteInfo.site=t[1]);let s=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"([^"]*)"/);s&&(n.siteInfo.title=s[1]);let i=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"([^"]*)"/);i&&(n.siteInfo.description=i[1]);let o=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"([^"]*)"/);o&&(n.siteInfo.author=o[1]);let l=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"([^"]*)"/);l&&(n.siteInfo.language=l[1]);let r=e.match(/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"([^"]*)"/);r&&(n.currentTheme=r[1]),n.typography={};let d=e.match(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"([^"]*)"/);d&&(n.typography.fontSource=d[1]);let p=e.match(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"([^"]*)"/);p&&(n.typography.proseFont=p[1]);let c=e.match(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"([^"]*)"/);c&&(n.typography.headingFont=c[1]);let u=e.match(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"([^"]*)"/);u&&(n.typography.monoFont=u[1]),n.navigation={pages:[],social:[]};let g=e.match(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[([\s\S]*?)\]/);if(g){let O=g[1].matchAll(/\{\s*title:\s*"([^"]*)",\s*url:\s*"([^"]*)"\s*\}/g);for(let x of O)n.navigation.pages.push({title:x[1],url:x[2]})}let m=e.match(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[([\s\S]*?)\]/);if(m){let O=m[1].matchAll(/\{\s*\n\s*title:\s*"([^"]*)",\s*\n\s*url:\s*"([^"]*)",\s*\n\s*icon:\s*"([^"]*)",?\s*\n\s*\}/g);for(let x of O)n.navigation.social.push({title:x[1],url:x[2],icon:x[3]})}n.postOptions={};let f=e.match(/\/\/ \[CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS\]\s*tableOfContents:\s*(true|false)/);f&&(n.postOptions.tableOfContents=f[1]==="true");let N=e.match(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/);N&&(n.postOptions.readingTime=N[1]==="true");let y=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/),C=e.match(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/);(y||C)&&(n.postOptions.linkedMentions={enabled:y?y[1]==="true":!1,linkedMentionsCompact:C?C[1]==="true":!1});let b=e.match(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/);b&&(n.postOptions.graphView={enabled:b[1]==="true"});let R=e.match(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/);R&&(n.postOptions.postNavigation=R[1]==="true");let $=e.match(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/);$&&(n.postOptions.comments={enabled:$[1]==="true"}),n.optionalContentTypes={};let H=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*projects:\s*(true|false)/);H&&(n.optionalContentTypes.projects=H[1]==="true");let B=e.match(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*docs:\s*(true|false)/);B&&(n.optionalContentTypes.docs=B[1]==="true"),n.footer={};let V=e.match(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*(true|false)/);V&&(n.footer.showSocialIconsInFooter=V[1]==="true"),n.commandPalette={};let U=e.match(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/);U&&(n.commandPalette.enabled=U[1]==="true");let z=e.match(/\/\/ \[CONFIG:SITE_URL\]\s*site:\s*['"`]([^'"`]+)['"`]/);z&&(n.site=z[1]);let W=e.match(/\/\/ \[CONFIG:SITE_TITLE\]\s*title:\s*['"`]([^'"`]+)['"`]/);W&&(n.title=W[1]);let q=e.match(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*description:\s*['"`]([^'"`]+)['"`]/);q&&(n.description=q[1]);let j=e.match(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*author:\s*['"`]([^'"`]+)['"`]/);j&&(n.author=j[1]);let F=e.match(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*language:\s*['"`]([^'"`]+)['"`]/);return F&&(n.language=F[1]),n}};var Ne=class{interpolateTemplate(a,e,n){return a.replace(/\$\{settings\.currentTheme\}/g,e.currentTheme).replace(/\$\{settings\.typography\.fontSource\}/g,e.typography.fontSource).replace(/\$\{settings\.typography\.proseFont\}/g,e.typography.proseFont).replace(/\$\{settings\.typography\.headingFont\}/g,e.typography.headingFont).replace(/\$\{settings\.typography\.monoFont\}/g,e.typography.monoFont).replace(/\$\{settings\.typography\.customFonts\.prose\}/g,e.typography.customFonts.prose).replace(/\$\{settings\.typography\.customFonts\.heading\}/g,e.typography.customFonts.heading).replace(/\$\{settings\.typography\.customFonts\.mono\}/g,e.typography.customFonts.mono).replace(/\$\{settings\.optionalFeatures\.comments\.enabled\}/g,e.optionalFeatures.comments.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.enabled\}/g,e.optionalFeatures.profilePicture.enabled.toString()).replace(/\$\{settings\.optionalFeatures\.profilePicture\.image\}/g,e.optionalFeatures.profilePicture.image).replace(/\$\{settings\.optionalFeatures\.profilePicture\.alt\}/g,e.optionalFeatures.profilePicture.alt).replace(/\$\{settings\.optionalFeatures\.profilePicture\.size\}/g,e.optionalFeatures.profilePicture.size).replace(/\$\{settings\.optionalFeatures\.profilePicture\.url\}/g,e.optionalFeatures.profilePicture.url||"").replace(/\$\{settings\.optionalFeatures\.profilePicture\.placement\}/g,e.optionalFeatures.profilePicture.placement).replace(/\$\{settings\.optionalFeatures\.profilePicture\.style\}/g,e.optionalFeatures.profilePicture.style).replace(/\$\{settings\.deployment\.platform\}/g,e.deployment.platform).replace(/\$\{templateName\}/g,n)}getTemplateConfig(a,e){switch(a){case"standard":return{layout:{contentWidth:"45rem"},footer:{enabled:!0,showSocialIconsInFooter:!0},darkModeToggleButton:"both",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!0,social:!0}},optionalContentTypes:{projects:!0,docs:!0},homeOptions:{featuredPost:{enabled:!0,type:"latest"},recentPosts:{enabled:!0,count:7},projects:{enabled:!0,count:2},docs:{enabled:!0,count:3},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!1},graphView:{enabled:!0,showInSidebar:!0,showInCommandPalette:!0,maxNodes:100},postNavigation:!0,showPostCardCoverImages:"featured-and-posts",postCardAspectRatio:"og"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"traditional"}};case"compact":return{layout:{contentWidth:"42rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"ctrl+K",placeholder:"Search posts",search:{posts:!0,pages:!1,projects:!1,docs:!1},sections:{quickActions:!0,pages:!1,social:!0}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"below"}},postOptions:{postsPerPage:6,readingTime:!0,wordCount:!0,tableOfContents:!0,tags:!0,linkedMentions:{enabled:!0,linkedMentionsCompact:!0},graphView:{enabled:!1},postNavigation:!0,showPostCardCoverImages:"posts",postCardAspectRatio:"custom",customPostCardAspectRatio:"2.5/1"},navigation:{showNavigation:!0,showMobileMenu:!0,style:"minimal"}};case"minimal":return{layout:{contentWidth:"40rem"},optionalContentTypes:{projects:!1,docs:!1},footer:{showSocialIconsInFooter:!1},darkModeToggleButton:"commandPalette",commandPalette:{enabled:!0,shortcut:"",placeholder:"Search content",search:{posts:!0,pages:!0,projects:!1,docs:!1},sections:{quickActions:!1,pages:!1,social:!1}},homeOptions:{featuredPost:{enabled:!1,type:"latest"},recentPosts:{enabled:!0,count:7},blurb:{placement:"none"}},postOptions:{postsPerPage:6,readingTime:!1,wordCount:!1,tableOfContents:!1,tags:!1,linkedMentions:{enabled:!1,linkedMentionsCompact:!1},graphView:{enabled:!1},postNavigation:!1,showPostCardCoverImages:"none",postCardAspectRatio:"og"},navigation:{showNavigation:!1,showMobileMenu:!1,style:"minimal"}};default:return{}}}};var Ie=class{validateMarkers(a){let n=["CONFIG:SITE_URL","CONFIG:SITE_TITLE","CONFIG:SITE_DESCRIPTION","CONFIG:SITE_AUTHOR","CONFIG:SITE_LANGUAGE","CONFIG:THEME","CONFIG:FONT_SOURCE","CONFIG:FONT_BODY","CONFIG:FONT_HEADING","CONFIG:FONT_MONO","CONFIG:LAYOUT_CONTENT_WIDTH","CONFIG:FOOTER_ENABLED","CONFIG:FOOTER_SHOW_SOCIAL_ICONS","CONFIG:SCROLL_TO_TOP","CONFIG:FEATURE_BUTTON","CONFIG:DEPLOYMENT_PLATFORM","CONFIG:COMMAND_PALETTE_ENABLED","CONFIG:COMMAND_PALETTE_SHORTCUT","CONFIG:COMMAND_PALETTE_PLACEHOLDER","CONFIG:COMMAND_PALETTE_SEARCH_POSTS","CONFIG:COMMAND_PALETTE_SEARCH_PAGES","CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS","CONFIG:COMMAND_PALETTE_SEARCH_DOCS","CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS","CONFIG:COMMAND_PALETTE_SECTIONS_PAGES","CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW","CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME","CONFIG:PROFILE_PICTURE_ENABLED","CONFIG:PROFILE_PICTURE_IMAGE","CONFIG:PROFILE_PICTURE_ALT","CONFIG:PROFILE_PICTURE_SIZE","CONFIG:PROFILE_PICTURE_URL","CONFIG:PROFILE_PICTURE_PLACEMENT","CONFIG:PROFILE_PICTURE_STYLE","CONFIG:NAVIGATION_SHOW_NAVIGATION","CONFIG:NAVIGATION_STYLE","CONFIG:NAVIGATION_SHOW_MOBILE_MENU","CONFIG:NAVIGATION_PAGES","CONFIG:NAVIGATION_SOCIAL","CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS","CONFIG:OPTIONAL_CONTENT_TYPES_DOCS","CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED","CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE","CONFIG:HOME_OPTIONS_FEATURED_POST_SLUG","CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED","CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT","CONFIG:HOME_OPTIONS_PROJECTS_ENABLED","CONFIG:HOME_OPTIONS_PROJECTS_COUNT","CONFIG:HOME_OPTIONS_DOCS_ENABLED","CONFIG:HOME_OPTIONS_DOCS_COUNT","CONFIG:HOME_OPTIONS_BLURB_PLACEMENT","CONFIG:POST_OPTIONS_POSTS_PER_PAGE","CONFIG:POST_OPTIONS_READING_TIME","CONFIG:POST_OPTIONS_WORD_COUNT","CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS","CONFIG:POST_OPTIONS_TAGS","CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED","CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT","CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE","CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES","CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS","CONFIG:POST_OPTIONS_POST_NAVIGATION","CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES","CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO","CONFIG:POST_OPTIONS_COMMENTS_ENABLED"].filter(t=>!a.includes(`// [${t}]`));return{valid:n.length===0,missing:n}}validateSyntax(a){let e=[];try{let n=(a.match(/\{/g)||[]).length,t=(a.match(/\}/g)||[]).length,s=(a.match(/\[/g)||[]).length,i=(a.match(/\]/g)||[]).length;n!==t&&e.push("Mismatched braces"),s!==i&&e.push("Mismatched brackets")}catch(n){e.push(`Validation failed: ${n instanceof Error?n.message:String(n)}`)}return{valid:e.length===0,errors:e}}};var Ee=class{constructor(){this.templateManager=new Ne,this.markerValidator=new Ie}modifyConfigFromPreset(a,e){var p,c,u,g,m,f,N,y;let n=a.config,t=this.modifyConfigFromFeatures(n,e),s=this.templateManager.getTemplateConfig(a.name,n);if(t.includes("// [CONFIG:THEME]")){let C=/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,b=t.match(C);t=t.replace(C,`// [CONFIG:THEME]
  theme: "${n.currentTheme}"`)}t=t.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${n.typography.fontSource}"`),t=t.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${n.typography.fontSource==="cdn"?n.typography.customFonts.prose:n.typography.proseFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${n.typography.fontSource==="cdn"?n.typography.customFonts.heading:n.typography.headingFont}"`),t=t.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${n.typography.fontSource==="cdn"?n.typography.customFonts.mono:n.typography.monoFont}"`),t=t.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${n.deployment.platform}"`),n.optionalContentTypes&&(n.optionalContentTypes.projects!==void 0&&(t=t.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${n.optionalContentTypes.projects}`)),n.optionalContentTypes.docs!==void 0&&(t=t.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${n.optionalContentTypes.docs}`))),(p=s.layout)!=null&&p.contentWidth&&(t=t.replace(/\/\/ \[CONFIG:LAYOUT_CONTENT_WIDTH\]\s*\n\s*contentWidth:\s*"[^"]*"/,`// [CONFIG:LAYOUT_CONTENT_WIDTH]
    contentWidth: "${s.layout.contentWidth}"`)),s.optionalContentTypes&&(s.optionalContentTypes.projects!==void 0&&(t=t.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS\]\s*\n\s*projects:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_PROJECTS]
    projects: ${s.optionalContentTypes.projects}`)),s.optionalContentTypes.docs!==void 0&&(t=t.replace(/\/\/ \[CONFIG:OPTIONAL_CONTENT_TYPES_DOCS\]\s*\n\s*docs:\s*(true|false)/,`// [CONFIG:OPTIONAL_CONTENT_TYPES_DOCS]
    docs: ${s.optionalContentTypes.docs}`))),s.featureButton&&(t=t.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*\n\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${s.featureButton}"`)),s.footer&&(s.footer.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:FOOTER_ENABLED]
    enabled: ${s.footer.enabled}`)),s.footer.showSocialIconsInFooter!==void 0&&(t=t.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${s.footer.showSocialIconsInFooter}`))),s.navigation&&(s.navigation.style&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:NAVIGATION_STYLE]
    style: "${s.navigation.style}"`)),s.navigation.showNavigation!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_NAVIGATION\]\s*showNavigation:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_NAVIGATION]
    showNavigation: ${s.navigation.showNavigation}`)),s.navigation.showMobileMenu!==void 0&&(t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SHOW_MOBILE_MENU\]\s*showMobileMenu:\s*(true|false)/,`// [CONFIG:NAVIGATION_SHOW_MOBILE_MENU]
    showMobileMenu: ${s.navigation.showMobileMenu}`))),s.commandPalette&&(s.commandPalette.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${s.commandPalette.enabled}`)),s.commandPalette.shortcut!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SHORTCUT\]\s*shortcut:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_SHORTCUT]
    shortcut: "${s.commandPalette.shortcut}"`)),s.commandPalette.placeholder!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_PLACEHOLDER\]\s*placeholder:\s*"[^"]*"/,`// [CONFIG:COMMAND_PALETTE_PLACEHOLDER]
    placeholder: "${s.commandPalette.placeholder}"`)),s.commandPalette.search&&(s.commandPalette.search.posts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_POSTS\]\s*posts:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_POSTS]
      posts: ${s.commandPalette.search.posts}`)),s.commandPalette.search.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PAGES]
      pages: ${s.commandPalette.search.pages}`)),s.commandPalette.search.projects!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS\]\s*projects:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_PROJECTS]
      projects: ${s.commandPalette.search.projects}`)),s.commandPalette.search.docs!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SEARCH_DOCS\]\s*docs:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SEARCH_DOCS]
      docs: ${s.commandPalette.search.docs}`))),s.commandPalette.sections&&(s.commandPalette.sections.quickActions!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS\]\s*quickActions:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_QUICK_ACTIONS]
      quickActions: ${s.commandPalette.sections.quickActions}`)),s.commandPalette.sections.pages!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_PAGES\]\s*pages:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_PAGES]
      pages: ${s.commandPalette.sections.pages}`)),s.commandPalette.sections.social!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL\]\s*social:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_SECTIONS_SOCIAL]
      social: ${s.commandPalette.sections.social}`))),s.commandPalette.quickActions&&(s.commandPalette.quickActions.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${s.commandPalette.quickActions.enabled}`)),s.commandPalette.quickActions.toggleMode!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${s.commandPalette.quickActions.toggleMode}`)),s.commandPalette.quickActions.graphView!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${s.commandPalette.quickActions.graphView}`)),s.commandPalette.quickActions.changeTheme!==void 0&&(t=t.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${s.commandPalette.quickActions.changeTheme}`)))),s.homeOptions&&(s.homeOptions.featuredPost&&(s.homeOptions.featuredPost.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_ENABLED]
      enabled: ${s.homeOptions.featuredPost.enabled}`)),s.homeOptions.featuredPost.type&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE\]\s*type:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_FEATURED_POST_TYPE]
      type: "${s.homeOptions.featuredPost.type}"`))),s.homeOptions.recentPosts&&(s.homeOptions.recentPosts.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_ENABLED]
      enabled: ${s.homeOptions.recentPosts.enabled}`)),s.homeOptions.recentPosts.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_RECENT_POSTS_COUNT]
      count: ${s.homeOptions.recentPosts.count}`))),s.homeOptions.projects&&(s.homeOptions.projects.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_PROJECTS_ENABLED]
      enabled: ${s.homeOptions.projects.enabled}`)),s.homeOptions.projects.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_PROJECTS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_PROJECTS_COUNT]
      count: ${s.homeOptions.projects.count}`))),s.homeOptions.docs&&(s.homeOptions.docs.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:HOME_OPTIONS_DOCS_ENABLED]
      enabled: ${s.homeOptions.docs.enabled}`)),s.homeOptions.docs.count&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_DOCS_COUNT\]\s*count:\s*\d+/,`// [CONFIG:HOME_OPTIONS_DOCS_COUNT]
      count: ${s.homeOptions.docs.count}`))),(c=s.homeOptions.blurb)!=null&&c.placement&&(t=t.replace(/\/\/ \[CONFIG:HOME_OPTIONS_BLURB_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:HOME_OPTIONS_BLURB_PLACEMENT]
      placement: "${s.homeOptions.blurb.placement}"`))),s.postOptions&&(s.postOptions.postsPerPage&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POSTS_PER_PAGE\]\s*postsPerPage:\s*\d+/,`// [CONFIG:POST_OPTIONS_POSTS_PER_PAGE]
    postsPerPage: ${s.postOptions.postsPerPage}`)),[{key:"readingTime",marker:"CONFIG:POST_OPTIONS_READING_TIME"},{key:"wordCount",marker:"CONFIG:POST_OPTIONS_WORD_COUNT"},{key:"tableOfContents",marker:"CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS"},{key:"tags",marker:"CONFIG:POST_OPTIONS_TAGS"},{key:"postNavigation",marker:"CONFIG:POST_OPTIONS_POST_NAVIGATION"}].forEach(b=>{s.postOptions[b.key]!==void 0&&(t=t.replace(new RegExp(`// \\[${b.marker}\\]\\s*${b.key}:\\s*(true|false)`),`// [${b.marker}]
    ${b.key}: ${s.postOptions[b.key]}`))}),s.postOptions.linkedMentions&&(s.postOptions.linkedMentions.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${s.postOptions.linkedMentions.enabled}`)),s.postOptions.linkedMentions.linkedMentionsCompact!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${s.postOptions.linkedMentions.linkedMentionsCompact}`))),s.postOptions.graphView&&(s.postOptions.graphView.enabled!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
    enabled: ${s.postOptions.graphView.enabled}`)),s.postOptions.graphView.showInSidebar!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR\]\s*showInSidebar:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_SIDEBAR]
      showInSidebar: ${s.postOptions.graphView.showInSidebar}`)),s.postOptions.graphView.showInCommandPalette!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE\]\s*showInCommandPalette:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_IN_COMMAND_PALETTE]
      showInCommandPalette: ${s.postOptions.graphView.showInCommandPalette}`)),s.postOptions.graphView.maxNodes&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES\]\s*maxNodes:\s*\d+/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_MAX_NODES]
      maxNodes: ${s.postOptions.graphView.maxNodes}`)),s.postOptions.graphView.showOrphanedPosts!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS\]\s*showOrphanedPosts:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_SHOW_ORPHANED_POSTS]
      showOrphanedPosts: ${s.postOptions.graphView.showOrphanedPosts}`))),s.postOptions.showPostCardCoverImages&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${s.postOptions.showPostCardCoverImages}"`)),s.postOptions.postCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${s.postOptions.postCardAspectRatio}"`)),s.postOptions.customPostCardAspectRatio&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${s.postOptions.customPostCardAspectRatio}"`))),((g=(u=n.optionalFeatures)==null?void 0:u.profilePicture)==null?void 0:g.enabled)!==void 0&&(t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:PROFILE_PICTURE_ENABLED]
    enabled: ${n.optionalFeatures.profilePicture.enabled}`)),(f=(m=n.optionalFeatures)==null?void 0:m.profilePicture)!=null&&f.enabled&&(t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_IMAGE\]\s*image:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_IMAGE]
    image: "${n.optionalFeatures.profilePicture.image}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_ALT\]\s*alt:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_ALT]
    alt: "${n.optionalFeatures.profilePicture.alt}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_SIZE\]\s*size:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_SIZE]
    size: "${n.optionalFeatures.profilePicture.size}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_URL\]\s*url:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_URL]
    url: "${n.optionalFeatures.profilePicture.url||""}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_PLACEMENT\]\s*placement:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_PLACEMENT]
    placement: "${n.optionalFeatures.profilePicture.placement}"`),t=t.replace(/\/\/ \[CONFIG:PROFILE_PICTURE_STYLE\]\s*style:\s*"[^"]*"/,`// [CONFIG:PROFILE_PICTURE_STYLE]
    style: "${n.optionalFeatures.profilePicture.style}"`)),((y=(N=n.optionalFeatures)==null?void 0:N.comments)==null?void 0:y.enabled)!==void 0&&(t=t.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${n.optionalFeatures.comments.enabled}`));let o=this.markerValidator.validateMarkers(t);if(!o.valid)return console.error("\u274C Config modification failed: Missing markers:",o.missing),console.error("Please ensure all CONFIG markers are present in your config.ts file"),e;let l=this.markerValidator.validateSyntax(t);if(!l.valid)return console.error("\u274C Config modification failed: Syntax errors:",l.errors),e;t=t.replace(/\/\/ \[CONFIG:SITE_URL\]\s*\n\s*site:\s*"[^"]*"/,`// [CONFIG:SITE_URL]
  site: "${n.siteInfo.site}"`),t=t.replace(/\/\/ \[CONFIG:SITE_TITLE\]\s*\n\s*title:\s*"[^"]*"/,`// [CONFIG:SITE_TITLE]
  title: "${n.siteInfo.title}"`),t=t.replace(/\/\/ \[CONFIG:SITE_DESCRIPTION\]\s*\n\s*description:\s*"[^"]*"/,`// [CONFIG:SITE_DESCRIPTION]
  description: "${n.siteInfo.description}"`),t=t.replace(/\/\/ \[CONFIG:SITE_AUTHOR\]\s*\n\s*author:\s*"[^"]*"/,`// [CONFIG:SITE_AUTHOR]
  author: "${n.siteInfo.author}"`),t=t.replace(/\/\/ \[CONFIG:SITE_LANGUAGE\]\s*\n\s*language:\s*"[^"]*"/,`// [CONFIG:SITE_LANGUAGE]
  language: "${n.siteInfo.language}"`);let r=n.navigation.pages.map(C=>`      { title: "${C.title}", url: "${C.url}" }`).join(`,
`);t=t.replace(/\/\/ \[CONFIG:NAVIGATION_PAGES\]\s*\n\s*pages:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_PAGES]
    pages: [
${r},
    ]`);let d=n.navigation.social.map(C=>`      {
        title: "${C.title}",
        url: "${C.url}",
        icon: "${C.icon}",
      }`).join(`,
`);return t=t.replace(/\/\/ \[CONFIG:NAVIGATION_SOCIAL\]\s*\n\s*social:\s*\[[\s\S]*?\]/,`// [CONFIG:NAVIGATION_SOCIAL]
    social: [
${d},
    ]`),t}modifyConfigFromFeatures(a,e){var t,s;let n=e;return n=n.replace(/\/\/ \[CONFIG:THEME\]\s*\n\s*theme:\s*"[^"]*"/,`// [CONFIG:THEME]
  theme: "${a.currentTheme}"`),n=n.replace(/\/\/ \[CONFIG:FONT_SOURCE\]\s*\n\s*source:\s*"[^"]*"/,`// [CONFIG:FONT_SOURCE]
    source: "${a.typography.fontSource}"`),n=n.replace(/\/\/ \[CONFIG:FONT_BODY\]\s*\n\s*body:\s*"[^"]*"/,`// [CONFIG:FONT_BODY]
      body: "${a.typography.fontSource==="cdn"?a.typography.customFonts.prose:a.typography.proseFont}"`),n=n.replace(/\/\/ \[CONFIG:FONT_HEADING\]\s*\n\s*heading:\s*"[^"]*"/,`// [CONFIG:FONT_HEADING]
      heading: "${a.typography.fontSource==="cdn"?a.typography.customFonts.heading:a.typography.headingFont}"`),n=n.replace(/\/\/ \[CONFIG:FONT_MONO\]\s*\n\s*mono:\s*"[^"]*"/,`// [CONFIG:FONT_MONO]
      mono: "${a.typography.fontSource==="cdn"?a.typography.customFonts.mono:a.typography.monoFont}"`),n=n.replace(/\/\/ \[CONFIG:DEPLOYMENT_PLATFORM\]\s*\n\s*platform:\s*"[^"]*"/,`// [CONFIG:DEPLOYMENT_PLATFORM]
    platform: "${a.deployment.platform}"`),n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_ENABLED]
    enabled: ${a.features.commandPalette}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS\]\s*tableOfContents:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TABLE_OF_CONTENTS]
    tableOfContents: ${a.features.tableOfContents}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_READING_TIME\]\s*readingTime:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_READING_TIME]
    readingTime: ${a.features.readingTime}`),"wordCount"in a.features&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_WORD_COUNT\]\s*wordCount:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_WORD_COUNT]
    wordCount: ${a.features.wordCount}`)),"tags"in a.features&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_TAGS\]\s*tags:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_TAGS]
    tags: ${a.features.tags}`)),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_ENABLED]
      enabled: ${a.features.linkedMentions}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT\]\s*linkedMentionsCompact:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_LINKED_MENTIONS_COMPACT]
      linkedMentionsCompact: ${(t=a.features.linkedMentionsCompact)!=null?t:!1}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_COMMENTS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_COMMENTS_ENABLED]
      enabled: ${a.features.comments}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_GRAPH_VIEW_ENABLED]
    enabled: ${a.features.graphView}`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_NAVIGATION\]\s*postNavigation:\s*(true|false)/,`// [CONFIG:POST_OPTIONS_POST_NAVIGATION]
    postNavigation: ${a.features.postNavigation}`),n=n.replace(/\/\/ \[CONFIG:SCROLL_TO_TOP\]\s*scrollToTop:\s*(true|false)/,`// [CONFIG:SCROLL_TO_TOP]
  scrollToTop: ${a.features.scrollToTop}`),n=n.replace(/\/\/ \[CONFIG:FOOTER_SHOW_SOCIAL_ICONS\]\s*showSocialIconsInFooter:\s*[^,\n}]+/,`// [CONFIG:FOOTER_SHOW_SOCIAL_ICONS]
    showSocialIconsInFooter: ${a.features.showSocialIconsInFooter}`),n=n.replace(/\/\/ \[CONFIG:FEATURE_BUTTON\]\s*featureButton:\s*"[^"]*"/,`// [CONFIG:FEATURE_BUTTON]
  featureButton: "${a.features.featureButton}"`),(s=a.features)!=null&&s.quickActions&&(n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED\]\s*enabled:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_ENABLED]
      enabled: ${a.features.quickActions.enabled}`),n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE\]\s*toggleMode:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_TOGGLE_MODE]
      toggleMode: ${a.features.quickActions.toggleMode}`),n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW\]\s*graphView:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_GRAPH_VIEW]
      graphView: ${a.features.quickActions.graphView}`),n=n.replace(/\/\/ \[CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME\]\s*changeTheme:\s*(true|false)/,`// [CONFIG:COMMAND_PALETTE_QUICK_ACTIONS_CHANGE_THEME]
      changeTheme: ${a.features.quickActions.changeTheme}`)),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES\]\s*showPostCardCoverImages:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_SHOW_POST_CARD_COVER_IMAGES]
    showPostCardCoverImages: "${a.features.showPostCardCoverImages}"`),n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO\]\s*postCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_POST_CARD_ASPECT_RATIO]
    postCardAspectRatio: "${a.features.postCardAspectRatio}"`),a.features.customPostCardAspectRatio&&(n=n.replace(/\/\/ \[CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO\]\s*customPostCardAspectRatio:\s*"[^"]*"/,`// [CONFIG:POST_OPTIONS_CUSTOM_POST_CARD_ASPECT_RATIO]
    customPostCardAspectRatio: "${a.features.customPostCardAspectRatio}"`)),n}};var Ge={};J(Ge,{config:()=>Qe,default:()=>Je,description:()=>Ye,name:()=>Ke});var Ke="Standard",Ye="Full-featured blog with all options enabled",Qe={currentTemplate:"standard",features:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!1,graphView:!0,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!0,profilePicture:!1,comments:!1,featureButton:"mode",quickActions:{enabled:!0,toggleMode:!0,graphView:!0,changeTheme:!0}}},Je={name:Ke,description:Ye,config:Qe};var xe={};J(xe,{config:()=>et,default:()=>tt,description:()=>Ze,name:()=>Xe});var Xe="Minimal",Ze="Clean, simple blog with minimal features",et={currentTemplate:"minimal",features:{commandPalette:!0,tableOfContents:!1,readingTime:!1,linkedMentions:!1,linkedMentionsCompact:!1,graphView:!1,postNavigation:!1,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!1,toggleMode:!1,graphView:!1,changeTheme:!1}}},tt={name:Xe,description:Ze,config:et};var ke={};J(ke,{config:()=>st,default:()=>ot,description:()=>nt,name:()=>at});var at="Compact",nt="Balanced setup for smaller sites",st={currentTemplate:"compact",features:{commandPalette:!0,tableOfContents:!0,readingTime:!0,linkedMentions:!0,linkedMentionsCompact:!0,graphView:!1,postNavigation:!0,scrollToTop:!0,showSocialIconsInFooter:!1,profilePicture:!1,comments:!1,featureButton:"none",quickActions:{enabled:!0,toggleMode:!0,graphView:!1,changeTheme:!0}}},ot={name:at,description:nt,config:st};var be=class{constructor(a){this.app=a,this.fileManager=new ye(a),this.presetModifier=new Ee}async getConfigFileInfo(){return this.fileManager.getConfigFileInfo()}async readConfig(){return this.fileManager.readConfig()}async writeConfig(a){return this.fileManager.writeConfig(a)}async applyPreset(a){let e=await this.readConfig(),n=this.presetModifier.modifyConfigFromPreset(a,e);return await this.writeConfig(n)}async detectAstroDevServer(){return this.fileManager.detectAstroDevServer()}async updateIndividualFeatures(a){let e=await this.readConfig(),n=this.presetModifier.modifyConfigFromFeatures(a,e);return await this.writeConfig(n)}async triggerRebuild(){}getTemplatePreset(a){try{switch(a){case"standard":return Ge;case"minimal":return xe;case"compact":return ke;default:return console.error(`Unknown template ID: ${a}`),null}}catch(e){return console.error("Error loading template preset:",e),null}}};var Fe=class{constructor(a){this.app=a}async getPluginStatus(){var t;let a=this.app.plugins,e=["astro-composer","insert-unsplash-image","obsidian-shellcommands"],n=[];for(let s of e){let i=(t=a==null?void 0:a.plugins)==null?void 0:t[s],o=(a==null?void 0:a.enabledPlugins)&&a.enabledPlugins.has(s),l=this.isPluginInstalled(s);n.push({name:this.getPluginDisplayName(s),installed:l,enabled:o||!1,configurable:this.isPluginConfigurable(s),currentSettings:i?await this.getPluginSettings(i):void 0})}return n}isPluginInstalled(a){var t,s;let e=(t=this.app.plugins)==null?void 0:t.communityPlugins;if(e&&Array.isArray(e))return e.includes(a);let n=this.app.plugins;return!!((s=n==null?void 0:n.plugins)!=null&&s[a])}getPluginDisplayName(a){return{"astro-composer":"Astro Composer","insert-unsplash-image":"Image Inserter","obsidian-shellcommands":"Shell Commands"}[a]||a}isPluginConfigurable(a){return["astro-composer","insert-unsplash-image"].includes(a)}async getPluginSettings(a){return{}}async configurePlugins(a){let e=0,n=0;try{return n++,await this.configureObsidianSettings(a.obsidianSettings),e++,n++,await this.configureAstroComposerSettings(a.astroComposerSettings),e++,n++,await this.configureImageInserterSettings(a.imageInserterSettings),e++,e>0}catch(t){return console.error("Plugin configuration failed:",t),!1}}async configureObsidianSettings(a){try{let e=this.app;if(e.setting&&typeof e.setting.set=="function")a.attachmentLocation==="subfolder"?(await e.setting.set("attachmentFolderPath",`./${a.subfolderName}`),await e.setting.set("newLinkFormat","relative")):(await e.setting.set("attachmentFolderPath","./"),await e.setting.set("newLinkFormat","relative")),typeof e.setting.save=="function"&&await e.setting.save();else{let n=this.app.vault.config;a.attachmentLocation==="subfolder"?(n.newLinkFormat="relative",n.attachmentFolderPath=`./${a.subfolderName}`):(n.newLinkFormat="relative",n.attachmentFolderPath="./"),await this.app.vault.saveConfig()}try{e.setting&&e.setting.open}catch(n){}}catch(e){throw console.error("Failed to configure Obsidian settings:",e),e}}async configureAstroComposerSettings(a){var e;try{let n=this.app.plugins,t=(e=n==null?void 0:n.plugins)==null?void 0:e["astro-composer"];t&&t.settings&&(t.settings.creationMode=a.creationMode,t.settings.indexFileName=a.indexFileName,await t.saveSettings())}catch(n){console.error("Failed to configure Astro Composer:",n)}}async configureImageInserterSettings(a){var e;try{let n=this.app.plugins,t=(e=n==null?void 0:n.plugins)==null?void 0:e["insert-unsplash-image"];t&&t.settings&&(t.settings.frontmatter&&(t.settings.frontmatter.valueFormat=a.valueFormat),await t.saveSettings())}catch(n){console.error("Failed to configure Image Inserter:",n)}}async getManualConfigurationInstructions(a){let e=`## Obsidian Settings
`;return e+=`1. Go to **Settings \u2192 Files & Links**
`,e+="2. Set **Default location for new attachments** to: ",e+=a.obsidianSettings.attachmentLocation==="subfolder"?`**"In subfolder under current folder"**
`:`**"Same folder as current file"**
`,a.obsidianSettings.attachmentLocation==="subfolder"&&(e+=`3. Set **Subfolder name** to: **"${a.obsidianSettings.subfolderName}"**
`),e+=`## Astro Composer Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Astro Composer**
`,e+=`2. Set **Creation mode** to: "${a.astroComposerSettings.creationMode==="file"?"File-based":"Folder-based"}"
`,a.astroComposerSettings.creationMode==="folder"&&(e+=`3. Set **Index file name** to: "${a.astroComposerSettings.indexFileName}"
`),e+=`## Image Inserter Plugin
`,e+=`1. Go to **Settings \u2192 Community plugins \u2192 Image Inserter**
`,e+=`2. Set **Frontmatter \u2192 Value Format** to: "${a.imageInserterSettings.valueFormat}"
`,e+=`**Note**: After making these changes, you should see them reflected in Obsidian's settings interface. If the automatic configuration worked, these settings should already be applied.
`,e}};var Ae=class extends Ve.Plugin{async onload(){await this.loadSettings(),this.configManager=new be(this.app),this.pluginManager=new Fe(this.app),$e(this),this.settingsTab=new Se(this.app,this),this.addSettingTab(this.settingsTab),this.addRibbonIcon("rocket","Astro Modular Settings",async()=>{await this.loadSettings(),new w(this.app,this).open()}),this.settings.runWizardOnStartup&&(this.startupTimeoutId=window.setTimeout(()=>{this.runStartupWizard()},2e3))}onunload(){this.startupTimeoutId&&(window.clearTimeout(this.startupTimeoutId),this.startupTimeoutId=void 0)}async loadSettings(){this.settings=Object.assign({},K,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async runStartupWizard(){await this.loadSettings(),new w(this.app,this).open()}openSettings(){this.app.setting.open(),this.app.setting.openTabById(this.manifest.id)}triggerSettingsRefresh(){this.settingsTab&&this.settingsTab.render()}};
